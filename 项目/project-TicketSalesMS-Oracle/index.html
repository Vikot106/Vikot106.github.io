<!DOCTYPE html>
<html lang="zh-CN">
    <!-- title -->




<!-- keywords -->




<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" >
    <meta name="author" content="Vikot106">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="Vikot106">
    
    <meta name="keywords" content="hexo,hexo-theme,hexo-blog">
    
    <meta name="description" content="Vikot106’s blog">
    <meta name="description" content="Oracle数据库期末作品。 需求分析功能阐述 系统主要分为两类用户，他们相应的操作：   管理员：创建、修改、删除表数据，执行存储过程。  会员：查票、查优惠、查积分、买票与退票。    主要功能：购买优惠电影票，并可获得会员积分与使用会员积分。  用例图 功能模块设计 影讯管理模块 新片录入：该模块用于添加新的影片信息。 修改资料：该模块用于修改已添加的影片信息。 删除影片：该模块用于删除现有">
<meta property="og:type" content="article">
<meta property="og:title" content="项目：特惠影票销售系统PL&#x2F;SQL数据库设计">
<meta property="og:url" content="http://vikot106.github.io/%E9%A1%B9%E7%9B%AE/project-TicketSalesMS-Oracle/index.html">
<meta property="og:site_name" content="Vikot106’s blog">
<meta property="og:description" content="Oracle数据库期末作品。 需求分析功能阐述 系统主要分为两类用户，他们相应的操作：   管理员：创建、修改、删除表数据，执行存储过程。  会员：查票、查优惠、查积分、买票与退票。    主要功能：购买优惠电影票，并可获得会员积分与使用会员积分。  用例图 功能模块设计 影讯管理模块 新片录入：该模块用于添加新的影片信息。 修改资料：该模块用于修改已添加的影片信息。 删除影片：该模块用于删除现有">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://vikot106.github.io/%E9%A1%B9%E7%9B%AE/project-TicketSalesMS-Oracle/shot1.png">
<meta property="og:image" content="http://vikot106.github.io/%E9%A1%B9%E7%9B%AE/project-TicketSalesMS-Oracle/shot2.png">
<meta property="og:image" content="http://vikot106.github.io/%E9%A1%B9%E7%9B%AE/project-TicketSalesMS-Oracle/shot3.png">
<meta property="article:published_time" content="2021-04-27T07:40:23.000Z">
<meta property="article:modified_time" content="2021-06-19T09:06:50.109Z">
<meta property="article:author" content="Vikot106">
<meta property="article:tag" content="代码记录">
<meta property="article:tag" content="Oracle数据库">
<meta property="article:tag" content="PL&#x2F;SQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://vikot106.github.io/%E9%A1%B9%E7%9B%AE/project-TicketSalesMS-Oracle/shot1.png">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    
    <title>项目：特惠影票销售系统PL/SQL数据库设计 · Vikot106&#39;s Blog</title>
    <style type="text/css">
    @font-face {
        font-family: 'Oswald-Regular';
        src: url("/font/Oswald-Regular.ttf");
    }

    body {
        margin: 0;
    }

    header,
    footer,
    .back-top,
    .sidebar,
    .container,
    .site-intro-meta,
    .toc-wrapper {
        display: none;
    }

    .site-intro {
        position: relative;
        z-index: 3;
        width: 100%;
        /* height: 50vh; */
        overflow: hidden;
    }

    .site-intro-placeholder {
        position: absolute;
        z-index: -2;
        top: 0;
        left: 0;
        width: calc(100% + 300px);
        height: 100%;
        background: repeating-linear-gradient(-45deg, #444 0, #444 80px, #333 80px, #333 160px);
        background-position: center center;
        transform: translate3d(-226px, 0, 0);
        animation: gradient-move 2.5s ease-out 0s infinite;
    }

    @keyframes gradient-move {
        0% {
            transform: translate3d(-226px, 0, 0);
        }
        100% {
            transform: translate3d(0, 0, 0);
        }
    }

</style>

    <link rel="preload" href= "/css/style.css?v=20210204" as="style" onload="this.onload=null;this.rel='stylesheet'" />
    <link rel="stylesheet" href= "/css/mobile.css?v=20210204" media="(max-width: 980px)">
    
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'" />
    
    <!-- /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
/* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/ -->
<script>
(function( w ){
	"use strict";
	// rel=preload support test
	if( !w.loadCSS ){
		w.loadCSS = function(){};
	}
	// define on the loadCSS obj
	var rp = loadCSS.relpreload = {};
	// rel=preload feature support test
	// runs once and returns a function for compat purposes
	rp.support = (function(){
		var ret;
		try {
			ret = w.document.createElement( "link" ).relList.supports( "preload" );
		} catch (e) {
			ret = false;
		}
		return function(){
			return ret;
		};
	})();

	// if preload isn't supported, get an asynchronous load by using a non-matching media attribute
	// then change that media back to its intended value on load
	rp.bindMediaToggle = function( link ){
		// remember existing media attr for ultimate state, or default to 'all'
		var finalMedia = link.media || "all";

		function enableStylesheet(){
			link.media = finalMedia;
		}

		// bind load handlers to enable media
		if( link.addEventListener ){
			link.addEventListener( "load", enableStylesheet );
		} else if( link.attachEvent ){
			link.attachEvent( "onload", enableStylesheet );
		}

		// Set rel and non-applicable media type to start an async request
		// note: timeout allows this to happen async to let rendering continue in IE
		setTimeout(function(){
			link.rel = "stylesheet";
			link.media = "only x";
		});
		// also enable media after 3 seconds,
		// which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
		setTimeout( enableStylesheet, 3000 );
	};

	// loop through link elements in DOM
	rp.poly = function(){
		// double check this to prevent external calls from running
		if( rp.support() ){
			return;
		}
		var links = w.document.getElementsByTagName( "link" );
		for( var i = 0; i < links.length; i++ ){
			var link = links[ i ];
			// qualify links to those with rel=preload and as=style attrs
			if( link.rel === "preload" && link.getAttribute( "as" ) === "style" && !link.getAttribute( "data-loadcss" ) ){
				// prevent rerunning on link
				link.setAttribute( "data-loadcss", true );
				// bind listeners to toggle media back
				rp.bindMediaToggle( link );
			}
		}
	};

	// if unsupported, run the polyfill
	if( !rp.support() ){
		// run once at least
		rp.poly();

		// rerun poly on an interval until onload
		var run = w.setInterval( rp.poly, 500 );
		if( w.addEventListener ){
			w.addEventListener( "load", function(){
				rp.poly();
				w.clearInterval( run );
			} );
		} else if( w.attachEvent ){
			w.attachEvent( "onload", function(){
				rp.poly();
				w.clearInterval( run );
			} );
		}
	}


	// commonjs
	if( typeof exports !== "undefined" ){
		exports.loadCSS = loadCSS;
	}
	else {
		w.loadCSS = loadCSS;
	}
}( typeof global !== "undefined" ? global : this ) );
</script>

    <link rel="icon" href= "/assets/favicon.ico" />
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js" as="script" />
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" as="script" />
    <link rel="preload" href="/scripts/main.js?v=20210204" as="script" />
    <link rel="preload" as="font" href="/font/Oswald-Regular.ttf" crossorigin>
    <link rel="preload" as="font" href="https://at.alicdn.com/t/font_327081_1dta1rlogw17zaor.woff" crossorigin>
    <script src="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.3/js/all.min.js"  data-auto-replace-svg="nest" ></script>
    
    <!-- fancybox -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" defer></script>
    <!-- 百度统计  -->
    
    <!-- 谷歌统计  -->
    
<meta name="generator" content="Hexo 5.4.0"></head>

    
        <body class="post-body">
    
    
<header class="header">

    <div class="read-progress"></div>
    <div class="header-sidebar-menu">&#xe775;</div>
    <!-- post页的toggle banner  -->
    
    <div class="banner">
            <div class="blog-title">
                <a href="/" >Vikot106&#39;s Blog.</a>
            </div>
            <div class="post-title">
                <a href="#" class="post-name">项目：特惠影票销售系统PL/SQL数据库设计</a>
            </div>
    </div>
    
    <a class="home-link" href=/>Vikot106's Blog.</a>
</header>
    <div class="wrapper">
        <div class="site-intro" style="







height:50vh;
">
    
    <!-- 主页  -->
    
    
    <!-- 404页  -->
            
    <div class="site-intro-placeholder"></div>
    <div class="site-intro-img" style="background-image: url(/intro/post-bg.jpg)"></div>
    <div class="site-intro-meta">
        <!-- 标题  -->
        <h1 class="intro-title">
            <!-- 主页  -->
            
            项目：特惠影票销售系统PL/SQL数据库设计
            <!-- 404 -->
            
        </h1>
        <!-- 副标题 -->
        <p class="intro-subtitle">
            <!-- 主页副标题  -->
            
            
            <!-- 404 -->
            
        </p>
        <!-- 文章页meta -->
        
            <div class="post-intros">
                <!-- 文章页标签  -->
                
                    <div class= post-intro-tags >
    
        <a class="post-tag" href="javascript:void(0);" data-tags = "代码记录">代码记录</a>
    
        <a class="post-tag" href="javascript:void(0);" data-tags = "Oracle数据库">Oracle数据库</a>
    
        <a class="post-tag" href="javascript:void(0);" data-tags = "PL/SQL">PL/SQL</a>
    
</div>
                
                
                    <div class="post-intro-read">
                        <span>字数统计: <span class="post-count word-count">6.7k</span>阅读时长: <span class="post-count reading-time">35 min</span></span>
                    </div>
                
                <div class="post-intro-meta">
                    <span class="post-intro-calander iconfont-archer">&#xe676;</span>
                    <span class="post-intro-time">2021/04/27</span>
                    
                    <span id="busuanzi_container_page_pv" class="busuanzi-pv">
                        <span class="iconfont-archer">&#xe602;</span>
                        <span id="busuanzi_value_page_pv"></span>
                    </span>
                    
                    <span class="shareWrapper">
                        <span class="iconfont-archer shareIcon">&#xe71d;</span>
                        <span class="shareText">Share</span>
                        <ul class="shareList">
                            <li class="iconfont-archer share-qr" data-type="qr">&#xe75b;
                                <div class="share-qrcode"></div>
                            </li>
                            <li class="iconfont-archer" data-type="weibo">&#xe619;</li>
                            <li class="iconfont-archer" data-type="qzone">&#xe62e;</li>
                            <li class="iconfont-archer" data-type="twitter">&#xe634;</li>
                            <li class="iconfont-archer" data-type="facebook">&#xe67a;</li>
                        </ul>
                    </span>
                </div>
            </div>
        
    </div>
</div>
        <script>
 
  // get user agent
  var browser = {
    versions: function () {
      var u = window.navigator.userAgent;
      return {
        userAgent: u,
        trident: u.indexOf('Trident') > -1, //IE内核
        presto: u.indexOf('Presto') > -1, //opera内核
        webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
        gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
        mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
        ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
        android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
        iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者安卓QQ浏览器
        iPad: u.indexOf('iPad') > -1, //是否为iPad
        webApp: u.indexOf('Safari') == -1, //是否为web应用程序，没有头部与底部
        weixin: u.indexOf('MicroMessenger') == -1, //是否为微信浏览器
        uc: u.indexOf('UCBrowser') > -1 //是否为android下的UC浏览器
      };
    }()
  }
  console.log("userAgent:" + browser.versions.userAgent);

  // callback
  function fontLoaded() {
    console.log('font loaded');
    if (document.getElementsByClassName('site-intro-meta')) {
      document.getElementsByClassName('intro-title')[0].classList.add('intro-fade-in');
      document.getElementsByClassName('intro-subtitle')[0].classList.add('intro-fade-in');
      var postIntros = document.getElementsByClassName('post-intros')[0]
      if (postIntros) {
        postIntros.classList.add('post-fade-in');
      }
    }
  }

  // UC不支持跨域，所以直接显示
  function asyncCb(){
    if (browser.versions.uc) {
      console.log("UCBrowser");
      fontLoaded();
    } else {
      WebFont.load({
        custom: {
          families: ['Oswald-Regular']
        },
        loading: function () {  //所有字体开始加载
          // console.log('loading');
        },
        active: function () {  //所有字体已渲染
          fontLoaded();
        },
        inactive: function () { //字体预加载失败，无效字体或浏览器不支持加载
          console.log('inactive: timeout');
          fontLoaded();
        },
        timeout: 5000 // Set the timeout to two seconds
      });
    }
  }

  function asyncErr(){
    console.warn('script load from CDN failed, will load local script')
  }

  // load webfont-loader async, and add callback function
  function async(u, cb, err) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (cb) { o.addEventListener('load', function (e) { cb(null, e); }, false); }
    if (err) { o.addEventListener('error', function (e) { err(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }

  var asyncLoadWithFallBack = function(arr, success, reject) {
      var currReject = function(){
        reject()
        arr.shift()
        if(arr.length)
          async(arr[0], success, currReject)
        }

      async(arr[0], success, currReject)
  }

  asyncLoadWithFallBack([
    "https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js", 
    "https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js",
    "/lib/webfontloader.min.js"
  ], asyncCb, asyncErr)
</script>        
        <img class="loading" src="/assets/loading.svg" style="display: block; margin: 6rem auto 0 auto; width: 6rem; height: 6rem;" />
        <div class="container container-unloaded">
            <main class="main post-page">
    <article class="article-entry">
        <p>Oracle数据库期末作品。</p>
<h2 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h2><h3 id="功能阐述"><a href="#功能阐述" class="headerlink" title="功能阐述"></a>功能阐述</h3><ol>
<li>系统主要分为两类用户，他们相应的操作：</li>
</ol>
<ul>
<li><p>管理员：创建、修改、删除表数据，执行存储过程。</p>
</li>
<li><p>会员：查票、查优惠、查积分、买票与退票。</p>
</li>
</ul>
<ol start="2">
<li>主要功能：购买优惠电影票，并可获得会员积分与使用会员积分。</li>
</ol>
<h3 id="用例图"><a href="#用例图" class="headerlink" title="用例图"></a>用例图</h3><p><img src="/%E9%A1%B9%E7%9B%AE/project-TicketSalesMS-Oracle/shot1.png" alt="shot1"></p>
<h2 id="功能模块设计"><a href="#功能模块设计" class="headerlink" title="功能模块设计"></a>功能模块设计</h2><p><img src="/%E9%A1%B9%E7%9B%AE/project-TicketSalesMS-Oracle/shot2.png" alt="shot2"></p>
<h3 id="影讯管理模块"><a href="#影讯管理模块" class="headerlink" title="影讯管理模块"></a>影讯管理模块</h3><ol>
<li>新片录入：该模块用于添加新的影片信息。</li>
<li>修改资料：该模块用于修改已添加的影片信息。</li>
<li>删除影片：该模块用于删除现有影片。</li>
<li>查询数据：该模块用于查询影片信息。</li>
</ol>
<h3 id="会员管理模块"><a href="#会员管理模块" class="headerlink" title="会员管理模块"></a>会员管理模块</h3><ol>
<li>录入新会员：该模块用于添加新会员。</li>
<li>会员充值：该模块用于会员充值。</li>
<li>会员查询：该模块用于查询会员信息。</li>
<li>会员注销：该模块用于删除现有会员。</li>
<li>会员信息修改：该模块用于修改会员信息。</li>
</ol>
<h3 id="售票管理模块"><a href="#售票管理模块" class="headerlink" title="售票管理模块"></a>售票管理模块</h3><ol>
<li>会员购票：该模块用于添加购买特惠影票购买信息。</li>
<li>会员取票：该模块用于判断会员是否已取票。</li>
<li>盈利统计：该模块用于统计盈利数值。</li>
<li>销售统计：该模块用于统计销售量。</li>
</ol>
<h3 id="退票管理模块"><a href="#退票管理模块" class="headerlink" title="退票管理模块"></a>退票管理模块</h3><ol>
<li>会员退票：该模块用于添加退票信息。</li>
<li>退票统计：该模块用于统计退票数量。</li>
<li>返还金额统计：该模块用于统计退还金额。</li>
</ol>
<h3 id="折扣管理模块"><a href="#折扣管理模块" class="headerlink" title="折扣管理模块"></a>折扣管理模块</h3><ol>
<li>添加优惠信息：该模块用于添加优惠信息。</li>
<li>删除优惠信息：该模块用于删除优惠信息。</li>
<li>修改优惠信息：该模块用于修改优惠信息。</li>
<li>会员积分统计：该模块用于统计会员积分。</li>
<li>积分抵扣：该模块用于统计积分抵扣金额。</li>
<li>优惠力度：该模块用于计算优惠力度。</li>
</ol>
<h2 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h2><h3 id="数据库概念结构设计"><a href="#数据库概念结构设计" class="headerlink" title="数据库概念结构设计"></a>数据库概念结构设计</h3><p>本图涉及四个实体，分别是管理员、会员、电影和特惠影票，通过其之间的联系，E-R图设计如图:</p>
<p><img src="/%E9%A1%B9%E7%9B%AE/project-TicketSalesMS-Oracle/shot3.png" alt="shot3"></p>
<p>由实体联系分析得到数据库的关系模型：   </p>
<ul>
<li>影讯信息（影片ID、片名、上映时间、片长、售价、总票数、余票数）</li>
<li>会员信息（会员ID、会员名、会员手机、会员积分、会员余额、入会时间）</li>
<li>售票信息（订单号、会员ID、影片ID、购买时间、场次、影厅、座位、售价、实收、取票Flag）</li>
<li>退票信息（退单号、会员ID、影片ID、订单号、退票时间、退还金额、退还积分）</li>
<li>折扣信息（折扣ID、影片ID、折扣价、获得积分、折扣开始时间、折扣停止时间）</li>
</ul>
<h3 id="数据库逻辑结构设计"><a href="#数据库逻辑结构设计" class="headerlink" title="数据库逻辑结构设计"></a>数据库逻辑结构设计</h3><h4 id="movie-table（影讯表）"><a href="#movie-table（影讯表）" class="headerlink" title="movie_table（影讯表）"></a>movie_table（影讯表）</h4><table>
<thead>
<tr>
<th>表4-1</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>列名</td>
<td>数据类型</td>
<td>是否为空</td>
<td>说明</td>
</tr>
<tr>
<td>movie_id</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>影片编号 主键</td>
</tr>
<tr>
<td>movie_name</td>
<td>VARCHAR2（100）</td>
<td>否</td>
<td>影片名称</td>
</tr>
<tr>
<td>movie_date</td>
<td>DATE</td>
<td>否</td>
<td>上映时间</td>
</tr>
<tr>
<td>movie_time</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>影片时长</td>
</tr>
<tr>
<td>movie_price</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>影票原价</td>
</tr>
<tr>
<td>movie_count</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>总票数</td>
</tr>
<tr>
<td>movie_remain</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>余票数</td>
</tr>
</tbody></table>
<h4 id="member-table（会员信息表）"><a href="#member-table（会员信息表）" class="headerlink" title="member_table（会员信息表）"></a>member_table（会员信息表）</h4><table>
<thead>
<tr>
<th>表4-2</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>列名</td>
<td>数据类型</td>
<td>是否为空</td>
<td>说明</td>
</tr>
<tr>
<td>member_id</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>会员编号 主键</td>
</tr>
<tr>
<td>member_name</td>
<td>VARCHAR2（50）</td>
<td>否</td>
<td>会员名</td>
</tr>
<tr>
<td>member_phone</td>
<td>VARCHAR2（20）</td>
<td>否</td>
<td>联系方式</td>
</tr>
<tr>
<td>member_point</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>会员积分</td>
</tr>
<tr>
<td>member_balance</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>会员余额</td>
</tr>
<tr>
<td>member_date</td>
<td>DATE</td>
<td>否</td>
<td>注册时间</td>
</tr>
</tbody></table>
<h4 id="sale-table（售票信息表）"><a href="#sale-table（售票信息表）" class="headerlink" title="sale_table（售票信息表）"></a>sale_table（售票信息表）</h4><table>
<thead>
<tr>
<th>表4-3</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>列名</td>
<td>数据类型</td>
<td>是否为空</td>
<td>说明</td>
</tr>
<tr>
<td>sale_id</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>售票编号 主键</td>
</tr>
<tr>
<td>member_id</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>会员编号 外键</td>
</tr>
<tr>
<td>movie_id</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>影片编号 外键</td>
</tr>
<tr>
<td>sale_date</td>
<td>DATE</td>
<td>否</td>
<td>售票时间</td>
</tr>
<tr>
<td>sale_session</td>
<td>DATE</td>
<td>否</td>
<td>影片场次</td>
</tr>
<tr>
<td>sale_room</td>
<td>VARCHAR2（50）</td>
<td>否</td>
<td>影厅</td>
</tr>
<tr>
<td>sale_seat</td>
<td>VARCHAR2（20）</td>
<td>否</td>
<td>座位</td>
</tr>
<tr>
<td>sale_price</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>售价</td>
</tr>
<tr>
<td>sale_get</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>实收价</td>
</tr>
<tr>
<td>sale_flag</td>
<td>CHAR（1）</td>
<td>否</td>
<td>是否取票</td>
</tr>
</tbody></table>
<h4 id="back-table（退票信息表）"><a href="#back-table（退票信息表）" class="headerlink" title="back_table（退票信息表）"></a>back_table（退票信息表）</h4><table>
<thead>
<tr>
<th>表4-4</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>列名</td>
<td>数据类型</td>
<td>是否为空</td>
<td>说明</td>
</tr>
<tr>
<td>back_id</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>退票编号 主键</td>
</tr>
<tr>
<td>member_id</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>会员编号 外键</td>
</tr>
<tr>
<td>movie_id</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>影片编号 外键</td>
</tr>
<tr>
<td>sale_id</td>
<td>NUMBER（20）</td>
<td>是</td>
<td>售票编号 外键</td>
</tr>
<tr>
<td>back_date</td>
<td>DATE</td>
<td>否</td>
<td>退票时间</td>
</tr>
<tr>
<td>back_count</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>退回金额</td>
</tr>
<tr>
<td>back_point</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>退回积分</td>
</tr>
</tbody></table>
<h4 id="discount-table（折扣表）"><a href="#discount-table（折扣表）" class="headerlink" title="discount_table（折扣表）"></a>discount_table（折扣表）</h4><table>
<thead>
<tr>
<th>表4-5</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>列名</td>
<td>数据类型</td>
<td>是否为空</td>
<td>说明</td>
</tr>
<tr>
<td>discount_id</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>折扣编号 主键</td>
</tr>
<tr>
<td>movie_id</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>影片编号 外键</td>
</tr>
<tr>
<td>discount_count</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>折扣价格</td>
</tr>
<tr>
<td>discount_point</td>
<td>NUMBER（20）</td>
<td>否</td>
<td>赠送积分数量</td>
</tr>
<tr>
<td>discount_start</td>
<td>DATE</td>
<td>否</td>
<td>开始时间</td>
</tr>
<tr>
<td>discount_end</td>
<td>DATE</td>
<td>否</td>
<td>结束时间</td>
</tr>
</tbody></table>
<h3 id="用户权限以及授权功能"><a href="#用户权限以及授权功能" class="headerlink" title="用户权限以及授权功能"></a>用户权限以及授权功能</h3><h4 id="1-创建表空间"><a href="#1-创建表空间" class="headerlink" title="1. 创建表空间"></a>1. 创建表空间</h4><p>表空间movie_system_tbs：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space movie_system_tbs</span><br><span class="line">datafile <span class="string">&#x27;D:\app\space\lhr_MS_tbs.dbf&#x27;</span></span><br><span class="line">size <span class="number">50</span>m;</span><br></pre></td></tr></table></figure>

<h4 id="2-普通用户的创建和授权"><a href="#2-普通用户的创建和授权" class="headerlink" title="2. 普通用户的创建和授权"></a>2. 普通用户的创建和授权</h4><p>创建管理员用户c##hlr1802设置默认表空间并授权：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> c##lhr1802 identified <span class="keyword">by</span> lhr1802</span><br><span class="line"><span class="keyword">default</span> tablespace movie_system_tbs;</span><br><span class="line"></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span> session,dba <span class="keyword">to</span> c##lhr1802;</span><br></pre></td></tr></table></figure>

<p>创建普通用户c##hlr1802_user设置默认表空间并授权：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> c##lhr1802_user identified <span class="keyword">by</span> lhr1802</span><br><span class="line"><span class="keyword">default</span> tablespace movie_system_tbs;</span><br><span class="line"></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span> <span class="keyword">connect</span>,resource <span class="keyword">to</span> c##lhr1802_user;</span><br></pre></td></tr></table></figure>
<h4 id="3-表的创建"><a href="#3-表的创建" class="headerlink" title="3. 表的创建"></a>3. 表的创建</h4><h5 id="3-1-创建影讯表（movie-table）"><a href="#3-1-创建影讯表（movie-table）" class="headerlink" title="3.1 创建影讯表（movie_table）"></a>3.1 创建影讯表（movie_table）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> movie_table</span><br><span class="line">(</span><br><span class="line">movie_id number(<span class="number">20</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">movie_name varchar2(<span class="number">100</span>),</span><br><span class="line">movie_date <span class="type">date</span>,</span><br><span class="line">movie_time number(<span class="number">20</span>),</span><br><span class="line">movie_price number(<span class="number">20</span>),</span><br><span class="line">movie_count number(<span class="number">20</span>),</span><br><span class="line">movie_remain number(<span class="number">20</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="3-2-创建会员表（member-table）"><a href="#3-2-创建会员表（member-table）" class="headerlink" title="3.2 创建会员表（member_table）"></a>3.2 创建会员表（member_table）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> member_table</span><br><span class="line">(</span><br><span class="line">member_id number(<span class="number">20</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">member_name varchar2(<span class="number">50</span>),</span><br><span class="line">member_phone varchar2(<span class="number">20</span>),</span><br><span class="line">member_point number(<span class="number">20</span>),</span><br><span class="line">member_balance number(<span class="number">20</span>),</span><br><span class="line">member_date <span class="type">date</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="3-3-创建售票表（sale-table）"><a href="#3-3-创建售票表（sale-table）" class="headerlink" title="3.3 创建售票表（sale_table）"></a>3.3 创建售票表（sale_table）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> sale_table</span><br><span class="line">(</span><br><span class="line">sale_id number(<span class="number">20</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">member_id,<span class="keyword">CONSTRAINT</span> fk_s2memid <span class="keyword">FOREIGN</span> KEY (member_id)</span><br><span class="line">          <span class="keyword">REFERENCES</span> member_table(member_id),</span><br><span class="line">movie_id,<span class="keyword">CONSTRAINT</span> fk_s2movid <span class="keyword">FOREIGN</span> KEY (movie_id)</span><br><span class="line">          <span class="keyword">REFERENCES</span> movie_table(movie_id),</span><br><span class="line">sale_date <span class="type">date</span>,</span><br><span class="line">sale_session <span class="type">date</span>,</span><br><span class="line">sale_room varchar2(<span class="number">50</span>),</span><br><span class="line">sale_seat varchar2(<span class="number">20</span>),</span><br><span class="line">sale_price number(<span class="number">20</span>),</span><br><span class="line">sale_get number(<span class="number">20</span>),</span><br><span class="line">sale_flag <span class="type">char</span>(<span class="number">1</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="3-4-创建退票表（back-table）"><a href="#3-4-创建退票表（back-table）" class="headerlink" title="3.4 创建退票表（back_table）"></a>3.4 创建退票表（back_table）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> back_table</span><br><span class="line">(</span><br><span class="line">back_id number(<span class="number">20</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">member_id,<span class="keyword">CONSTRAINT</span> fk_b2memid <span class="keyword">FOREIGN</span> KEY (member_id)</span><br><span class="line">          <span class="keyword">REFERENCES</span> member_table(member_id),</span><br><span class="line">movie_id,<span class="keyword">CONSTRAINT</span> fk_b2movid <span class="keyword">FOREIGN</span> KEY (movie_id)</span><br><span class="line">          <span class="keyword">REFERENCES</span> movie_table(movie_id),</span><br><span class="line">sale_id,<span class="keyword">CONSTRAINT</span> fk_b2salid <span class="keyword">FOREIGN</span> KEY (sale_id)</span><br><span class="line">          <span class="keyword">REFERENCES</span> sale_table(sale_id),</span><br><span class="line">back_date <span class="type">date</span>,</span><br><span class="line">back_count number(<span class="number">20</span>),</span><br><span class="line">back_point number(<span class="number">20</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="3-5-创建折扣表（discount-table）"><a href="#3-5-创建折扣表（discount-table）" class="headerlink" title="3.5 创建折扣表（discount_table）"></a>3.5 创建折扣表（discount_table）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> discount_table</span><br><span class="line">(</span><br><span class="line">discount_id number(<span class="number">20</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">movie_id,<span class="keyword">CONSTRAINT</span> fk_d2movid <span class="keyword">FOREIGN</span> KEY (movie_id)</span><br><span class="line">          <span class="keyword">REFERENCES</span> movie_table(movie_id),</span><br><span class="line">discount_count number(<span class="number">20</span>),</span><br><span class="line">discount_point number(<span class="number">20</span>),</span><br><span class="line">discount_start <span class="type">date</span>,</span><br><span class="line">discount_end <span class="type">date</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="4-表信息的录入"><a href="#4-表信息的录入" class="headerlink" title="4.表信息的录入"></a>4.表信息的录入</h4><h5 id="4-1-movie-table表"><a href="#4-1-movie-table表" class="headerlink" title="4.1 movie_table表"></a>4.1 movie_table表</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> movie_table <span class="keyword">values</span>(<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;电影A&#x27;</span>,to_date(<span class="string">&#x27;2021-3-12 13:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;120&#x27;</span>,<span class="string">&#x27;60&#x27;</span>,<span class="string">&#x27;100&#x27;</span>,<span class="string">&#x27;98&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> movie_table <span class="keyword">values</span>(<span class="string">&#x27;0002&#x27;</span>,<span class="string">&#x27;电影B&#x27;</span>,to_date(<span class="string">&#x27;2021-3-13 15:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;120&#x27;</span>,<span class="string">&#x27;90&#x27;</span>,<span class="string">&#x27;90&#x27;</span>,<span class="string">&#x27;89&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h5 id="4-2-member-table表"><a href="#4-2-member-table表" class="headerlink" title="4.2 member_table表"></a>4.2 member_table表</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> member_table <span class="keyword">values</span>(<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;李杭瑞&#x27;</span>,<span class="string">&#x27;13300225588&#x27;</span>,<span class="string">&#x27;196&#x27;</span>,<span class="string">&#x27;90&#x27;</span>,to_date(<span class="string">&#x27;2021-01-29 17:20:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>));</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> member_table <span class="keyword">values</span>(<span class="string">&#x27;0002&#x27;</span>,<span class="string">&#x27;邱先生&#x27;</span>,<span class="string">&#x27;18244785236&#x27;</span>,<span class="string">&#x27;83&#x27;</span>,<span class="string">&#x27;60&#x27;</span>,to_date(<span class="string">&#x27;2021-05-03 17:20:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>));</span><br></pre></td></tr></table></figure>
<h5 id="4-3-sale-table表"><a href="#4-3-sale-table表" class="headerlink" title="4.3 sale_table表"></a>4.3 sale_table表</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sale_table <span class="keyword">values</span>(<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,to_date(<span class="string">&#x27;2021-4-10 13:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),</span><br><span class="line">to_date(<span class="string">&#x27;2021-4-12 13:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;普通影厅1&#x27;</span>,<span class="string">&#x27;L坐&#x27;</span>,<span class="string">&#x27;60&#x27;</span>,<span class="string">&#x27;30&#x27;</span>,<span class="string">&#x27;Y&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sale_table <span class="keyword">values</span>(<span class="string">&#x27;0002&#x27;</span>,<span class="string">&#x27;0002&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,to_date(<span class="string">&#x27;2021-4-10 13:15:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),</span><br><span class="line">to_date(<span class="string">&#x27;2021-4-12 13:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;普通影厅1&#x27;</span>,<span class="string">&#x27;L坐&#x27;</span>,<span class="string">&#x27;60&#x27;</span>,<span class="string">&#x27;30&#x27;</span>,<span class="string">&#x27;Y&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sale_table <span class="keyword">values</span>(<span class="string">&#x27;0003&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0002&#x27;</span>,to_date(<span class="string">&#x27;2021-4-11 15:30:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),</span><br><span class="line">to_date(<span class="string">&#x27;2021-4-12 21:00:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;激光影厅1&#x27;</span>,<span class="string">&#x27;R坐&#x27;</span>,<span class="string">&#x27;90&#x27;</span>,<span class="string">&#x27;45&#x27;</span>,<span class="string">&#x27;N&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sale_table <span class="keyword">values</span>(<span class="string">&#x27;0004&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0002&#x27;</span>,to_date(<span class="string">&#x27;2021-4-11 17:30:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),</span><br><span class="line">to_date(<span class="string">&#x27;2021-4-12 21:00:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;激光影厅1&#x27;</span>,<span class="string">&#x27;L坐&#x27;</span>,<span class="string">&#x27;90&#x27;</span>,<span class="string">&#x27;80&#x27;</span>,<span class="string">&#x27;N&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sale_table <span class="keyword">values</span>(<span class="string">&#x27;0005&#x27;</span>,<span class="string">&#x27;0002&#x27;</span>,<span class="string">&#x27;0002&#x27;</span>,to_date(<span class="string">&#x27;2021-4-11 17:35:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),</span><br><span class="line">to_date(<span class="string">&#x27;2021-4-12 21:00:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;激光影厅1&#x27;</span>,<span class="string">&#x27;R坐&#x27;</span>,<span class="string">&#x27;90&#x27;</span>,<span class="string">&#x27;70&#x27;</span>,<span class="string">&#x27;N&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h5 id="4-4-back-table表"><a href="#4-4-back-table表" class="headerlink" title="4.4 back_table表"></a>4.4 back_table表</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> back_table <span class="keyword">values</span>(<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0002&#x27;</span>,<span class="string">&#x27;0004&#x27;</span>,to_date(<span class="string">&#x27;2021-4-14 19:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;80&#x27;</span>,<span class="string">&#x27;8&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> back_table <span class="keyword">values</span>(<span class="string">&#x27;0002&#x27;</span>,<span class="string">&#x27;0002&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0002&#x27;</span>,to_date(<span class="string">&#x27;2021-4-15 19:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;60&#x27;</span>,<span class="string">&#x27;6&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h5 id="4-5-discount-table表"><a href="#4-5-discount-table表" class="headerlink" title="4.5 discount_table表"></a>4.5 discount_table表</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> discount_table <span class="keyword">values</span>(<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;30&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,to_date(<span class="string">&#x27;2021-3-13 15:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),</span><br><span class="line">to_date(<span class="string">&#x27;2021-5-10 12:10:10&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>));</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> discount_table <span class="keyword">values</span>(<span class="string">&#x27;0002&#x27;</span>,<span class="string">&#x27;0002&#x27;</span>,<span class="string">&#x27;65&#x27;</span>,<span class="string">&#x27;6&#x27;</span>,to_date(<span class="string">&#x27;2021-3-13 15:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),</span><br><span class="line">to_date(<span class="string">&#x27;2021-5-10 12:10:10&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>));</span><br></pre></td></tr></table></figure>
<h4 id="5-创建视图"><a href="#5-创建视图" class="headerlink" title="5. 创建视图"></a>5. 创建视图</h4><h5 id="5-1-查询电影余票"><a href="#5-1-查询电影余票" class="headerlink" title="5.1 查询电影余票"></a>5.1 查询电影余票</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> remain_condition</span><br><span class="line">(片名,票价,折扣价,余票数,总票数)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> m.movie_name,m.movie_price,d.discount_count,m.movie_remain,m.movie_count</span><br><span class="line"><span class="keyword">from</span> movie_table m,discount_table d</span><br><span class="line"><span class="keyword">where</span> m.movie_id<span class="operator">=</span>d.movie_id;</span><br></pre></td></tr></table></figure>
<h5 id="5-2-查询各个影片销量"><a href="#5-2-查询各个影片销量" class="headerlink" title="5.2 查询各个影片销量"></a>5.2 查询各个影片销量</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> sale_condition</span><br><span class="line">(销量,片名,票价,折扣价,总票数)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> m.movie_count<span class="operator">-</span>m.movie_remain,m.movie_name,m.movie_price,d.discount_count,m.movie_count</span><br><span class="line"><span class="keyword">from</span> movie_table m,discount_table d</span><br><span class="line"><span class="keyword">where</span> m.movie_id<span class="operator">=</span>d.movie_id;</span><br></pre></td></tr></table></figure>
<h5 id="5-3-查询各个影片折扣力度"><a href="#5-3-查询各个影片折扣力度" class="headerlink" title="5.3 查询各个影片折扣力度"></a>5.3 查询各个影片折扣力度</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> discount_condition</span><br><span class="line">(片名,票价,折扣价,折扣力度,余票数,开始时间,结束时间)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> m.movie_name,m.movie_price,d.discount_count,d.discount_count <span class="operator">/</span> m.movie_price,m.movie_remain,d.discount_start,discount_end</span><br><span class="line"><span class="keyword">from</span> movie_table m,discount_table d</span><br><span class="line"><span class="keyword">where</span> m.movie_id<span class="operator">=</span>d.movie_id;</span><br></pre></td></tr></table></figure>
<h5 id="5-4-查询各个影片收入"><a href="#5-4-查询各个影片收入" class="headerlink" title="5.4 查询各个影片收入"></a>5.4 查询各个影片收入</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> income_condition</span><br><span class="line">(片名,票价,折扣价,售票数,收入)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> m.movie_name,m.movie_price,d.discount_count,m.movie_count<span class="operator">-</span>m.movie_remain,<span class="built_in">sum</span>(s.sale_get)</span><br><span class="line"><span class="keyword">from</span> movie_table m,discount_table d,sale_table s</span><br><span class="line"><span class="keyword">where</span> m.movie_id<span class="operator">=</span>d.movie_id <span class="keyword">and</span> m.movie_id<span class="operator">=</span>s.movie_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> m.movie_name,m.movie_price,d.discount_count,m.movie_count<span class="operator">-</span>m.movie_remain;</span><br></pre></td></tr></table></figure>
<h5 id="5-5-查询各个影片退款情况"><a href="#5-5-查询各个影片退款情况" class="headerlink" title="5.5 查询各个影片退款情况"></a>5.5 查询各个影片退款情况</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> refund_condition</span><br><span class="line">(片名,票价,折扣价,售票数,退回)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> m.movie_name,m.movie_price,d.discount_count,m.movie_count<span class="operator">-</span>m.movie_remain,<span class="built_in">sum</span>(b.back_count)</span><br><span class="line"><span class="keyword">from</span> movie_table m,discount_table d,back_table b</span><br><span class="line"><span class="keyword">where</span> m.movie_id<span class="operator">=</span>d.movie_id <span class="keyword">and</span> m.movie_id<span class="operator">=</span>b.movie_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> m.movie_name,m.movie_price,d.discount_count,m.movie_count<span class="operator">-</span>m.movie_remain;</span><br></pre></td></tr></table></figure>
<h5 id="5-6-统计会员积分与可抵扣的金额"><a href="#5-6-统计会员积分与可抵扣的金额" class="headerlink" title="5.6 统计会员积分与可抵扣的金额"></a>5.6 统计会员积分与可抵扣的金额</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> point_condition</span><br><span class="line">(会员ID,会员名,积分,可抵扣金额)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> m.member_id,m.member_name,m.member_point,<span class="built_in">FLOOR</span>(m.member_point <span class="operator">/</span> <span class="number">10</span>)<span class="operator">*</span><span class="number">10</span></span><br><span class="line"><span class="keyword">from</span> member_table m</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> m.member_id,m.member_name,m.member_point;</span><br></pre></td></tr></table></figure>
<h5 id="5-7-查询会员观影排行"><a href="#5-7-查询会员观影排行" class="headerlink" title="5.7 查询会员观影排行"></a>5.7 查询会员观影排行</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> rank_condition</span><br><span class="line">(会员ID,会员名,观影场次)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> m.member_id,m.member_name,<span class="built_in">COUNT</span>(s.member_id)</span><br><span class="line"><span class="keyword">from</span> member_table m,sale_table s</span><br><span class="line"><span class="keyword">where</span> m.member_id<span class="operator">=</span>s.member_id <span class="keyword">and</span> s.sale_flag<span class="operator">=</span><span class="string">&#x27;Y&#x27;</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> m.member_id,m.member_name;</span><br></pre></td></tr></table></figure>
<h5 id="5-8-查询售票表中已取走的票"><a href="#5-8-查询售票表中已取走的票" class="headerlink" title="5.8 查询售票表中已取走的票"></a>5.8 查询售票表中已取走的票</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> take_condition</span><br><span class="line">(订单号,片名,场次,售票时间,实收款)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> s.sale_id,m.movie_name,s.sale_session,s.sale_date,s.sale_get</span><br><span class="line"><span class="keyword">from</span> movie_table m,sale_table s</span><br><span class="line"><span class="keyword">where</span> m.movie_id<span class="operator">=</span>s.movie_id <span class="keyword">and</span> s.sale_flag<span class="operator">=</span><span class="string">&#x27;Y&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h5 id="5-9-查询售票表中未取走的票"><a href="#5-9-查询售票表中未取走的票" class="headerlink" title="5.9 查询售票表中未取走的票"></a>5.9 查询售票表中未取走的票</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> untake_condition</span><br><span class="line">(订单号,片名,场次,售票时间,实收款)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> s.sale_id,m.movie_name,s.sale_session,s.sale_date,s.sale_get</span><br><span class="line"><span class="keyword">from</span> movie_table m,sale_table s</span><br><span class="line"><span class="keyword">where</span> m.movie_id<span class="operator">=</span>s.movie_id <span class="keyword">and</span> s.sale_flag<span class="operator">=</span><span class="string">&#x27;N&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h4 id="6-创建索引"><a href="#6-创建索引" class="headerlink" title="6. 创建索引"></a>6. 创建索引</h4><h5 id="6-1-按照电影信息创建余票降序索引"><a href="#6-1-按照电影信息创建余票降序索引" class="headerlink" title="6.1 按照电影信息创建余票降序索引"></a>6.1 按照电影信息创建余票降序索引</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index remain_price <span class="keyword">on</span> movie_table(movie_remain <span class="keyword">DESC</span>);</span><br></pre></td></tr></table></figure>
<h5 id="6-2-按照折扣价格创建升序索引"><a href="#6-2-按照折扣价格创建升序索引" class="headerlink" title="6.2 按照折扣价格创建升序索引"></a>6.2 按照折扣价格创建升序索引</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index discount_price <span class="keyword">on</span> discount_table(discount_count <span class="keyword">ASC</span>);</span><br></pre></td></tr></table></figure>
<h5 id="6-3-按照购票积分创建升序索引"><a href="#6-3-按照购票积分创建升序索引" class="headerlink" title="6.3 按照购票积分创建升序索引"></a>6.3 按照购票积分创建升序索引</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index give_point <span class="keyword">on</span> discount_table(discount_point <span class="keyword">ASC</span>);</span><br></pre></td></tr></table></figure>
<h5 id="6-4-按照会员积分创建降序索引"><a href="#6-4-按照会员积分创建降序索引" class="headerlink" title="6.4 按照会员积分创建降序索引"></a>6.4 按照会员积分创建降序索引</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index member_point <span class="keyword">on</span> member_table(member_point <span class="keyword">DESC</span>);</span><br></pre></td></tr></table></figure>
<h4 id="7-创建触发器"><a href="#7-创建触发器" class="headerlink" title="7. 创建触发器"></a>7. 创建触发器</h4><h5 id="7-1-插入修改或删除影讯后统计当前电影数量"><a href="#7-1-插入修改或删除影讯后统计当前电影数量" class="headerlink" title="7.1 插入修改或删除影讯后统计当前电影数量"></a>7.1 插入修改或删除影讯后统计当前电影数量</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">trigger</span> add_movie</span><br><span class="line">after <span class="keyword">insert</span> <span class="keyword">or</span> update <span class="keyword">or</span> <span class="keyword">delete</span> <span class="keyword">on</span> movie_table</span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">v_count number;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">into</span> v_count <span class="keyword">from</span> movie_table;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;当前上映电影数量为：&#x27;</span><span class="operator">||</span>v_count);</span><br><span class="line"><span class="keyword">end</span> add_movie;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> movie_table <span class="keyword">values</span>(<span class="string">&#x27;0003&#x27;</span>,<span class="string">&#x27;电影C&#x27;</span>,to_date(<span class="string">&#x27;2021-3-13 15:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),</span><br><span class="line"><span class="string">&#x27;120&#x27;</span>,<span class="string">&#x27;90&#x27;</span>,<span class="string">&#x27;90&#x27;</span>,<span class="string">&#x27;89&#x27;</span>);</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> movie_table <span class="keyword">where</span> movie_id<span class="operator">=</span><span class="number">0003</span>;</span><br></pre></td></tr></table></figure>
<h5 id="7-2-修改会员表后显示修改前与修改后信息的差别，插入和删除会员时显示删除的会员卡号和会员名"><a href="#7-2-修改会员表后显示修改前与修改后信息的差别，插入和删除会员时显示删除的会员卡号和会员名" class="headerlink" title="7.2 修改会员表后显示修改前与修改后信息的差别，插入和删除会员时显示删除的会员卡号和会员名"></a>7.2 修改会员表后显示修改前与修改后信息的差别，插入和删除会员时显示删除的会员卡号和会员名</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">trigger</span> modify_member</span><br><span class="line">after update <span class="keyword">or</span> <span class="keyword">delete</span> <span class="keyword">on</span> member_table</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">if inserting <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;会员卡号：&#x27;</span><span class="operator">||</span>:new.member_id<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;会员名：&#x27;</span><span class="operator">||</span>:new.member_name);</span><br><span class="line">elsif updating <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;会员卡号：&#x27;</span><span class="operator">||</span>:new.member_id<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;旧会员名：&#x27;</span><span class="operator">||</span>:old.member_name<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;新会员名：&#x27;</span><span class="operator">||</span>:new.member_name<span class="operator">||</span><span class="string">&#x27; &#x27;</span></span><br><span class="line"><span class="operator">||</span><span class="string">&#x27;旧手机号：&#x27;</span><span class="operator">||</span>:old.member_phone<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;新手机号：&#x27;</span><span class="operator">||</span>:new.member_phone<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;修改前积分：&#x27;</span><span class="operator">||</span>:old.member_point<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;修改后积分：&#x27;</span><span class="operator">||</span>:new.member_point<span class="operator">||</span><span class="string">&#x27; &#x27;</span></span><br><span class="line"><span class="operator">||</span><span class="string">&#x27;修改前余额：&#x27;</span><span class="operator">||</span>:old.member_balance<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;修改后余额：&#x27;</span><span class="operator">||</span>:new.member_balance);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;会员卡号：&#x27;</span><span class="operator">||</span>:old.member_id<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;会员名：&#x27;</span><span class="operator">||</span>:old.member_name);</span><br><span class="line"><span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span> modify_member;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line">update member_table <span class="keyword">set</span> member_balance<span class="operator">=</span><span class="string">&#x27;200&#x27;</span> <span class="keyword">where</span> member_id<span class="operator">=</span><span class="number">0001</span>;</span><br><span class="line">update member_table <span class="keyword">set</span> member_balance<span class="operator">=</span><span class="string">&#x27;90&#x27;</span> <span class="keyword">where</span> member_id<span class="operator">=</span><span class="number">0001</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> member_table <span class="keyword">values</span>(<span class="string">&#x27;0003&#x27;</span>,<span class="string">&#x27;喵喵喵&#x27;</span>,<span class="string">&#x27;18244785236&#x27;</span>,<span class="string">&#x27;83&#x27;</span>,<span class="string">&#x27;160&#x27;</span>,to_date(<span class="string">&#x27;2021-05-03 17:20:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>));</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> member_table <span class="keyword">where</span> member_id<span class="operator">=</span><span class="number">0003</span>;</span><br></pre></td></tr></table></figure>
<h5 id="7-3-修改售票表后显示修改前与修改后信息的差别"><a href="#7-3-修改售票表后显示修改前与修改后信息的差别" class="headerlink" title="7.3 修改售票表后显示修改前与修改后信息的差别"></a>7.3 修改售票表后显示修改前与修改后信息的差别</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">trigger</span> modify_sale</span><br><span class="line">after update <span class="keyword">on</span> sale_table</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">if updating <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;订单号：&#x27;</span><span class="operator">||</span>:new.member_id<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;旧影厅信息：&#x27;</span><span class="operator">||</span>:old.sale_room<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;新影厅信息：&#x27;</span><span class="operator">||</span>:new.sale_room<span class="operator">||</span><span class="string">&#x27; &#x27;</span></span><br><span class="line"><span class="operator">||</span><span class="string">&#x27;旧座位信息：&#x27;</span><span class="operator">||</span>:old.sale_seat<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;新座位信息：&#x27;</span><span class="operator">||</span>:new.sale_seat<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;修改前售价：&#x27;</span><span class="operator">||</span>:old.sale_price<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;修改后售价：&#x27;</span><span class="operator">||</span>:new.sale_price<span class="operator">||</span><span class="string">&#x27; &#x27;</span></span><br><span class="line"><span class="operator">||</span><span class="string">&#x27;修改前实收价：&#x27;</span><span class="operator">||</span>:old.sale_get<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;修改后实收价：&#x27;</span><span class="operator">||</span>:new.sale_get);</span><br><span class="line"><span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span> modify_sale;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line">update sale_table <span class="keyword">set</span> sale_get<span class="operator">=</span><span class="string">&#x27;35&#x27;</span> <span class="keyword">where</span> sale_id<span class="operator">=</span><span class="number">0003</span>;</span><br><span class="line">update sale_table <span class="keyword">set</span> sale_get<span class="operator">=</span><span class="string">&#x27;45&#x27;</span> <span class="keyword">where</span> sale_id<span class="operator">=</span><span class="number">0003</span>;</span><br></pre></td></tr></table></figure>
<h5 id="7-4-修改退票表后显示修改前与修改后信息的差别"><a href="#7-4-修改退票表后显示修改前与修改后信息的差别" class="headerlink" title="7.4 修改退票表后显示修改前与修改后信息的差别"></a>7.4 修改退票表后显示修改前与修改后信息的差别</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">trigger</span> modify_back</span><br><span class="line">after update <span class="keyword">on</span> back_table</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">if updating <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;退单号：&#x27;</span><span class="operator">||</span>:new.back_id<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;旧实退金额：&#x27;</span><span class="operator">||</span>:old.back_count<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;新实退金额：&#x27;</span><span class="operator">||</span>:new.back_count<span class="operator">||</span><span class="string">&#x27; &#x27;</span></span><br><span class="line"><span class="operator">||</span><span class="string">&#x27;旧扣除积分：&#x27;</span><span class="operator">||</span>:old.back_point<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;新扣除积分：&#x27;</span><span class="operator">||</span>:new.back_point);</span><br><span class="line"><span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span> modify_back;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line">update back_table <span class="keyword">set</span> back_count<span class="operator">=</span><span class="string">&#x27;40&#x27;</span> <span class="keyword">where</span> back_id<span class="operator">=</span><span class="number">0001</span>;</span><br><span class="line">update back_table <span class="keyword">set</span> back_count<span class="operator">=</span><span class="string">&#x27;80&#x27;</span> <span class="keyword">where</span> back_id<span class="operator">=</span><span class="number">0001</span>;</span><br></pre></td></tr></table></figure>
<h5 id="7-5-购票后显示折扣、获得积分、可抵金额、余额、余票"><a href="#7-5-购票后显示折扣、获得积分、可抵金额、余额、余票" class="headerlink" title="7.5 购票后显示折扣、获得积分、可抵金额、余额、余票"></a>7.5 购票后显示折扣、获得积分、可抵金额、余额、余票</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">trigger</span> buy_ticket</span><br><span class="line">after <span class="keyword">insert</span> <span class="keyword">on</span> sale_table</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">v_count number;</span><br><span class="line">v_discount number;</span><br><span class="line">v_point number;</span><br><span class="line">v_balance number;</span><br><span class="line">v_remain number;</span><br><span class="line">PRAGMA AUTONOMOUS_TRANSACTION;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> sale_price <span class="keyword">into</span> v_count <span class="keyword">from</span> sale_table <span class="keyword">where</span> sale_id<span class="operator">=</span>:new.sale_id;</span><br><span class="line"><span class="keyword">select</span> sale_get <span class="keyword">into</span> v_discount <span class="keyword">from</span> sale_table <span class="keyword">where</span> sale_id<span class="operator">=</span>:new.sale_id;</span><br><span class="line"><span class="keyword">select</span> discount_point <span class="keyword">into</span> v_point <span class="keyword">from</span> discount_table <span class="keyword">where</span> movie_id<span class="operator">=</span>:new.movie_id;</span><br><span class="line"><span class="keyword">select</span> member_balance <span class="keyword">into</span> v_balance <span class="keyword">from</span> member_table <span class="keyword">where</span> member_id<span class="operator">=</span>:new.member_id;</span><br><span class="line"><span class="keyword">select</span> movie_remain <span class="keyword">into</span> v_remain <span class="keyword">from</span> movie_table <span class="keyword">where</span> movie_id<span class="operator">=</span>:new.movie_id;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;本单折扣：&#x27;</span><span class="operator">||</span>v_discount<span class="operator">/</span>v_count<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;获得积分：&#x27;</span><span class="operator">||</span>v_point<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;可抵用金额&#x27;</span><span class="operator">||</span></span><br><span class="line"><span class="built_in">FLOOR</span>(v_point<span class="operator">/</span><span class="number">10</span>)<span class="operator">*</span><span class="number">10</span><span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;余额：&#x27;</span><span class="operator">||</span>v_balance<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;余票：&#x27;</span><span class="operator">||</span>v_remain);</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"><span class="keyword">end</span> buy_ticket;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sale_table <span class="keyword">values</span>(<span class="string">&#x27;0006&#x27;</span>,<span class="string">&#x27;0002&#x27;</span>,<span class="string">&#x27;0002&#x27;</span>,to_date(<span class="string">&#x27;2021-4-11 17:35:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),to_date(<span class="string">&#x27;2021-4-12 21:00:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;激光影厅1&#x27;</span>,<span class="string">&#x27;R坐&#x27;</span>,<span class="string">&#x27;90&#x27;</span>,<span class="string">&#x27;70&#x27;</span>,<span class="string">&#x27;N&#x27;</span>);</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> sale_table <span class="keyword">where</span> sale_id<span class="operator">=</span><span class="number">0006</span>;</span><br></pre></td></tr></table></figure>
<h5 id="7-6-退票后显示余额、退款额和退还积分"><a href="#7-6-退票后显示余额、退款额和退还积分" class="headerlink" title="7.6 退票后显示余额、退款额和退还积分"></a>7.6 退票后显示余额、退款额和退还积分</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">trigger</span> back_ticket</span><br><span class="line">after <span class="keyword">insert</span> <span class="keyword">on</span> back_table</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">v_count number;</span><br><span class="line">v_point number;</span><br><span class="line">v_back number;</span><br><span class="line">PRAGMA AUTONOMOUS_TRANSACTION;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> member_balance <span class="keyword">into</span> v_count <span class="keyword">from</span> member_table <span class="keyword">where</span> member_id<span class="operator">=</span>:new.member_id;</span><br><span class="line"><span class="keyword">select</span> back_count <span class="keyword">into</span> v_back <span class="keyword">from</span> back_table <span class="keyword">where</span> back_id<span class="operator">=</span>:new.back_id;</span><br><span class="line"><span class="keyword">select</span> back_point <span class="keyword">into</span> v_point <span class="keyword">from</span> back_table <span class="keyword">where</span> back_id<span class="operator">=</span>:new.back_id;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;帐户余额：&#x27;</span><span class="operator">||</span>v_count<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;退还金额：&#x27;</span><span class="operator">||</span>v_back<span class="operator">||</span><span class="string">&#x27; &#x27;</span><span class="operator">||</span><span class="string">&#x27;退还积分&#x27;</span><span class="operator">||</span>v_point);</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"><span class="keyword">end</span> back_ticket;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> back_table <span class="keyword">values</span>(<span class="string">&#x27;0003&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0002&#x27;</span>,<span class="string">&#x27;0004&#x27;</span>,to_date(<span class="string">&#x27;2021-4-14 19:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;80&#x27;</span>,<span class="string">&#x27;8&#x27;</span>);</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> back_table <span class="keyword">where</span> back_id<span class="operator">=</span><span class="number">0003</span>;</span><br></pre></td></tr></table></figure>
<h5 id="7-7-增改折扣后显示折扣价格"><a href="#7-7-增改折扣后显示折扣价格" class="headerlink" title="7.7 增改折扣后显示折扣价格"></a>7.7 增改折扣后显示折扣价格</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">trigger</span> add_discount</span><br><span class="line">after <span class="keyword">insert</span> <span class="keyword">or</span> update <span class="keyword">on</span> discount_table</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;折扣价格为：&#x27;</span><span class="operator">||</span>:new.discount_count);</span><br><span class="line"><span class="keyword">end</span> add_discount;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sale_table <span class="keyword">values</span>(<span class="string">&#x27;0006&#x27;</span>,<span class="string">&#x27;0002&#x27;</span>,<span class="string">&#x27;0002&#x27;</span>,to_date(<span class="string">&#x27;2021-4-11 17:35:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),to_date(<span class="string">&#x27;2021-4-12 21:00:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;激光影厅1&#x27;</span>,<span class="string">&#x27;R坐&#x27;</span>,<span class="string">&#x27;90&#x27;</span>,<span class="string">&#x27;70&#x27;</span>,<span class="string">&#x27;N&#x27;</span>);</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> sale_table <span class="keyword">where</span> sale_id<span class="operator">=</span><span class="number">0006</span>;</span><br></pre></td></tr></table></figure>
<h4 id="8-创建存储过程"><a href="#8-创建存储过程" class="headerlink" title="8. 创建存储过程"></a>8. 创建存储过程</h4><h5 id="8-1-会员充值"><a href="#8-1-会员充值" class="headerlink" title="8.1 会员充值"></a>8.1 会员充值</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace</span><br><span class="line"><span class="keyword">procedure</span> recharge(</span><br><span class="line">v_id member_table.member_id<span class="operator">%</span>type,</span><br><span class="line">v_balance member_table.member_balance<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">x member_table.member_id<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> member_id <span class="keyword">into</span> x <span class="keyword">from</span> member_table <span class="keyword">where</span> member_id<span class="operator">=</span>v_id;</span><br><span class="line">update member_table <span class="keyword">set</span> member_balance<span class="operator">=</span>member_balance<span class="operator">+</span>v_balance</span><br><span class="line"><span class="keyword">where</span> member_id<span class="operator">=</span>v_id;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;余额已增加！&#x27;</span>);</span><br><span class="line">exception</span><br><span class="line"><span class="keyword">when</span> NO_DATA_FOUND <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;充值失败！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> recharge;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> recharge(<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;50&#x27;</span>)</span><br><span class="line"><span class="keyword">exec</span> que_member(<span class="string">&#x27;0001&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h5 id="8-2-会员购票"><a href="#8-2-会员购票" class="headerlink" title="8.2 会员购票"></a>8.2 会员购票</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace</span><br><span class="line"><span class="keyword">procedure</span> buy_ticket(</span><br><span class="line">v_id sale_table.sale_id<span class="operator">%</span>type,</span><br><span class="line">v_meid sale_table.member_id<span class="operator">%</span>type,</span><br><span class="line">v_moid sale_table.movie_id<span class="operator">%</span>type,</span><br><span class="line">v_date sale_table.sale_date<span class="operator">%</span>type,</span><br><span class="line">v_session sale_table.sale_session<span class="operator">%</span>type,</span><br><span class="line">v_room sale_table.sale_room<span class="operator">%</span>type,</span><br><span class="line">v_seat sale_table.sale_seat<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">v_price sale_table.sale_price<span class="operator">%</span>type;</span><br><span class="line">v_get sale_table.sale_get<span class="operator">%</span>type;</span><br><span class="line">v_dipoint discount_table.discount_point<span class="operator">%</span>type;</span><br><span class="line">v_mepoint member_table.member_point<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> movie_price <span class="keyword">into</span> v_price <span class="keyword">from</span> movie_table <span class="keyword">where</span> movie_table.movie_id<span class="operator">=</span>v_moid;</span><br><span class="line"><span class="keyword">select</span> discount_count <span class="keyword">into</span> v_get <span class="keyword">from</span> discount_table <span class="keyword">where</span> discount_table.movie_id<span class="operator">=</span>v_moid;</span><br><span class="line"><span class="keyword">select</span> discount_point <span class="keyword">into</span> v_dipoint <span class="keyword">from</span> discount_table <span class="keyword">where</span> discount_table.movie_id<span class="operator">=</span>v_moid;</span><br><span class="line"><span class="keyword">select</span> member_point <span class="keyword">into</span> v_mepoint <span class="keyword">from</span> member_table <span class="keyword">where</span> member_id<span class="operator">=</span>v_meid;</span><br><span class="line">update member_table <span class="keyword">set</span> member_balance<span class="operator">=</span>member_balance<span class="operator">-</span>v_get <span class="keyword">where</span> member_id<span class="operator">=</span>v_meid;</span><br><span class="line">update member_table <span class="keyword">set</span> member_point<span class="operator">=</span>v_mepoint<span class="operator">-</span><span class="built_in">FLOOR</span>(v_mepoint <span class="operator">/</span> <span class="number">10</span>)<span class="operator">*</span><span class="number">10</span> <span class="keyword">where</span> member_id<span class="operator">=</span>v_meid;</span><br><span class="line">update member_table <span class="keyword">set</span> member_point<span class="operator">=</span>v_mepoint<span class="operator">+</span>v_dipoint <span class="keyword">where</span> member_id<span class="operator">=</span>v_meid;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sale_table <span class="keyword">values</span>(v_id,v_meid,v_moid,v_date,v_session,v_room,v_seat,v_price,v_get,<span class="string">&#x27;N&#x27;</span>);</span><br><span class="line">update movie_table <span class="keyword">set</span> movie_remain<span class="operator">=</span>movie_remain<span class="number">-1</span> <span class="keyword">where</span> movie_table.movie_id<span class="operator">=</span>v_moid;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;购票成功！您消费了：&#x27;</span><span class="operator">||</span>v_get<span class="operator">||</span><span class="string">&#x27;积分抵用：&#x27;</span><span class="operator">||</span><span class="built_in">FLOOR</span>(v_mepoint <span class="operator">/</span> <span class="number">10</span>)<span class="operator">*</span><span class="number">10</span><span class="operator">||</span><span class="string">&#x27;获得新积分：&#x27;</span></span><br><span class="line"><span class="operator">||</span>v_dipoint<span class="operator">||</span><span class="string">&#x27;您这次在特惠购票网省了&#x27;</span><span class="operator">||</span>v_price<span class="operator">-</span>v_get);</span><br><span class="line">EXCEPTION</span><br><span class="line"><span class="keyword">when</span> others <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;购票失败！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> buy_ticket;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> buy_ticket(<span class="string">&#x27;0007&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,to_date(<span class="string">&#x27;2021-4-10 13:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),to_date(<span class="string">&#x27;2021-4-12 13:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;普通影厅1&#x27;</span>,<span class="string">&#x27;L坐&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h5 id="8-3-会员退票"><a href="#8-3-会员退票" class="headerlink" title="8.3 会员退票"></a>8.3 会员退票</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace</span><br><span class="line"><span class="keyword">procedure</span> back_ticket(</span><br><span class="line">v_id back_table.back_id<span class="operator">%</span>type,</span><br><span class="line">v_moid back_table.movie_id<span class="operator">%</span>type,</span><br><span class="line">v_meid back_table.member_id<span class="operator">%</span>type,</span><br><span class="line">v_sid back_table.sale_id<span class="operator">%</span>type,</span><br><span class="line">v_date back_table.back_date<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">v_count back_table.back_count<span class="operator">%</span>type;</span><br><span class="line">v_point back_table.back_point<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> sale_get <span class="keyword">into</span> v_count <span class="keyword">from</span> sale_table <span class="keyword">where</span> sale_table.sale_id<span class="operator">=</span>v_sid;</span><br><span class="line"><span class="keyword">select</span> sale_get <span class="keyword">into</span> v_point <span class="keyword">from</span> sale_table <span class="keyword">where</span> sale_table.sale_id<span class="operator">=</span>v_sid;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> back_table <span class="keyword">values</span>(v_id,v_meid,v_moid,v_sid,v_date,v_count,v_point);</span><br><span class="line">update member_table <span class="keyword">set</span> member_balance<span class="operator">=</span>member_balance<span class="operator">+</span>v_count <span class="keyword">where</span> member_id<span class="operator">=</span>v_meid;</span><br><span class="line">update member_table <span class="keyword">set</span> member_point<span class="operator">=</span>member_point<span class="operator">+</span>v_point <span class="keyword">where</span> member_id<span class="operator">=</span>v_meid;</span><br><span class="line">update movie_table <span class="keyword">set</span> movie_remain<span class="operator">=</span>movie_remain<span class="operator">+</span><span class="number">1</span> <span class="keyword">where</span> movie_table.movie_id<span class="operator">=</span>v_moid;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;退票成功！退还了金额：&#x27;</span><span class="operator">||</span>v_count<span class="operator">||</span><span class="string">&#x27;退还了积分：&#x27;</span><span class="operator">||</span>v_point);</span><br><span class="line">EXCEPTION</span><br><span class="line"><span class="keyword">when</span> others <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;退票失败！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> back_ticket;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> back_ticket(<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0002&#x27;</span>,<span class="string">&#x27;0004&#x27;</span>,to_date(<span class="string">&#x27;2021-4-14 19:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h5 id="8-4-会员取票"><a href="#8-4-会员取票" class="headerlink" title="8.4 会员取票"></a>8.4 会员取票</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace</span><br><span class="line"><span class="keyword">procedure</span> check_in(</span><br><span class="line">v_id sale_table.sale_id<span class="operator">%</span>type,</span><br><span class="line">v_flag sale_table.sale_flag<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">x sale_table.sale_id<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> sale_id <span class="keyword">into</span> x <span class="keyword">from</span> sale_table <span class="keyword">where</span> sale_id<span class="operator">=</span>v_id;</span><br><span class="line">update sale_table <span class="keyword">set</span> sale_flag<span class="operator">=</span>v_flag</span><br><span class="line"><span class="keyword">where</span> sale_id<span class="operator">=</span>v_id;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;取票成功！&#x27;</span>);</span><br><span class="line">exception</span><br><span class="line"><span class="keyword">when</span> NO_DATA_FOUND <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;取票失败！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> check_in;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> check_in(<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;Y&#x27;</span>)</span><br><span class="line"><span class="keyword">exec</span> check_in(<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;N&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h5 id="8-5-影讯信息增加"><a href="#8-5-影讯信息增加" class="headerlink" title="8.5 影讯信息增加"></a>8.5 影讯信息增加</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace</span><br><span class="line"><span class="keyword">procedure</span> add_movie(</span><br><span class="line">v_id movie_table.movie_id<span class="operator">%</span>type,</span><br><span class="line">v_name movie_table.movie_name<span class="operator">%</span>type,</span><br><span class="line">v_date movie_table.movie_date<span class="operator">%</span>type,</span><br><span class="line">v_time movie_table.movie_time<span class="operator">%</span>type,</span><br><span class="line">v_price movie_table.movie_price<span class="operator">%</span>type,</span><br><span class="line">v_count movie_table.movie_count<span class="operator">%</span>type,</span><br><span class="line">v_remain movie_table.movie_remain<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> movie_table <span class="keyword">values</span>(v_id,v_name,v_date,v_time,v_price,v_count,v_remain);</span><br><span class="line">EXCEPTION</span><br><span class="line"><span class="keyword">when</span> Dup_val_on_index <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;此电影已存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">when</span> others <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;exception&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> add_movie;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> add_movie(<span class="string">&#x27;0002&#x27;</span>,<span class="string">&#x27;电影B&#x27;</span>,to_date(<span class="string">&#x27;2021-3-13 15:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;120&#x27;</span>,<span class="string">&#x27;90&#x27;</span>,<span class="string">&#x27;90&#x27;</span>,<span class="string">&#x27;89&#x27;</span>)</span><br><span class="line"><span class="keyword">exec</span> add_movie(<span class="string">&#x27;0003&#x27;</span>,<span class="string">&#x27;CC&#x27;</span>,to_date(<span class="string">&#x27;2021-3-13 15:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;120&#x27;</span>,<span class="string">&#x27;90&#x27;</span>,<span class="string">&#x27;90&#x27;</span>,<span class="string">&#x27;89&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h5 id="8-6-影讯信息删除"><a href="#8-6-影讯信息删除" class="headerlink" title="8.6 影讯信息删除"></a>8.6 影讯信息删除</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> del_movie</span><br><span class="line">(v_name movie_table.movie_name<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">x movie_table.movie_name<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> movie_name <span class="keyword">into</span> x <span class="keyword">from</span> movie_table <span class="keyword">where</span> movie_name<span class="operator">=</span>v_name;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> movie_table <span class="keyword">where</span> movie_name<span class="operator">=</span>v_name;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;此电影已删除！&#x27;</span>);</span><br><span class="line">exception</span><br><span class="line"><span class="keyword">when</span> NO_DATA_FOUND <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;此电影不存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> del_movie;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> del_movie(<span class="string">&#x27;BB&#x27;</span>)</span><br><span class="line"><span class="keyword">exec</span> del_movie(<span class="string">&#x27;CC&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h5 id="8-7-影讯信息修改"><a href="#8-7-影讯信息修改" class="headerlink" title="8.7 影讯信息修改"></a>8.7 影讯信息修改</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace</span><br><span class="line"><span class="keyword">procedure</span> upd_movie(</span><br><span class="line">v_id movie_table.movie_id<span class="operator">%</span>type,</span><br><span class="line">v_name movie_table.movie_name<span class="operator">%</span>type,</span><br><span class="line">v_date movie_table.movie_date<span class="operator">%</span>type,</span><br><span class="line">v_time movie_table.movie_time<span class="operator">%</span>type,</span><br><span class="line">v_price movie_table.movie_price<span class="operator">%</span>type,</span><br><span class="line">v_count movie_table.movie_count<span class="operator">%</span>type,</span><br><span class="line">v_remain movie_table.movie_remain<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">x movie_table.movie_id<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> movie_id <span class="keyword">into</span> x <span class="keyword">from</span> movie_table <span class="keyword">where</span> movie_id<span class="operator">=</span>v_id;</span><br><span class="line">update movie_table <span class="keyword">set</span> movie_name<span class="operator">=</span>v_name,movie_date<span class="operator">=</span>v_date,movie_time<span class="operator">=</span>v_time,movie_price<span class="operator">=</span>v_price,</span><br><span class="line">movie_count<span class="operator">=</span>v_count,movie_remain<span class="operator">=</span>v_remain</span><br><span class="line"><span class="keyword">where</span> movie_id<span class="operator">=</span>v_id;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;影讯已修改！&#x27;</span>);</span><br><span class="line">exception</span><br><span class="line"><span class="keyword">when</span> NO_DATA_FOUND <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;修改失败！此电影不存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> upd_movie;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> upd_movie(<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;电影A&#x27;</span>,to_date(<span class="string">&#x27;2021-3-12 13:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;120&#x27;</span>,<span class="string">&#x27;60&#x27;</span>,<span class="string">&#x27;100&#x27;</span>,<span class="string">&#x27;98&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h5 id="8-8-影讯信息查询"><a href="#8-8-影讯信息查询" class="headerlink" title="8.8 影讯信息查询"></a>8.8 影讯信息查询</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> que_movie(</span><br><span class="line">v_id movie_table.movie_id<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">v1 movie_table.movie_id<span class="operator">%</span>type;</span><br><span class="line">v2 movie_table.movie_name<span class="operator">%</span>type;</span><br><span class="line">v3 movie_table.movie_date<span class="operator">%</span>type;</span><br><span class="line">v4 movie_table.movie_time<span class="operator">%</span>type;</span><br><span class="line">v5 movie_table.movie_price<span class="operator">%</span>type;</span><br><span class="line">v6 movie_table.movie_count<span class="operator">%</span>type;</span><br><span class="line">v7 movie_table.movie_remain<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> movie_id,movie_name,movie_date,movie_time,movie_price,movie_count,movie_remain</span><br><span class="line"><span class="keyword">into</span> v1,v2,v3,v4,v5,v6,v7</span><br><span class="line"><span class="keyword">from</span> movie_table <span class="keyword">where</span> movie_id<span class="operator">=</span>v_id;</span><br><span class="line">dbms_output.put_line(v1<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v2<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v3<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v4<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v5<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v6<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v7);</span><br><span class="line">exception</span><br><span class="line"><span class="keyword">when</span> NO_DATA_FOUND <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;查询失败！此电影不存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> que_movie;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> que_movie(<span class="number">0002</span>)</span><br></pre></td></tr></table></figure>
<h5 id="8-9-会员信息增加"><a href="#8-9-会员信息增加" class="headerlink" title="8.9 会员信息增加"></a>8.9 会员信息增加</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace</span><br><span class="line"><span class="keyword">procedure</span> add_member(</span><br><span class="line">v_id member_table.member_id<span class="operator">%</span>type,</span><br><span class="line">v_name member_table.member_name<span class="operator">%</span>type,</span><br><span class="line">v_phone member_table.member_phone<span class="operator">%</span>type,</span><br><span class="line">v_point member_table.member_point<span class="operator">%</span>type,</span><br><span class="line">v_balance member_table.member_balance<span class="operator">%</span>type,</span><br><span class="line">v_date member_table.member_date<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> member_table <span class="keyword">values</span>(v_id,v_name,v_phone,v_point,v_balance,v_date);</span><br><span class="line">EXCEPTION</span><br><span class="line"><span class="keyword">when</span> Dup_val_on_index <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;此会员已存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">when</span> others <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;exception&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> add_member;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> add_member(<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;李杭瑞&#x27;</span>,<span class="string">&#x27;13300225588&#x27;</span>,<span class="string">&#x27;196&#x27;</span>,<span class="string">&#x27;90&#x27;</span>,to_date(<span class="string">&#x27;2021-01-29 17:20:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>))</span><br><span class="line"><span class="keyword">exec</span> add_member(<span class="string">&#x27;0003&#x27;</span>,<span class="string">&#x27;喵喵喵&#x27;</span>,<span class="string">&#x27;13300225588&#x27;</span>,<span class="string">&#x27;196&#x27;</span>,<span class="string">&#x27;90&#x27;</span>,to_date(<span class="string">&#x27;2021-01-29 17:20:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h5 id="8-10-会员信息删除"><a href="#8-10-会员信息删除" class="headerlink" title="8.10 会员信息删除"></a>8.10 会员信息删除</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> del_member</span><br><span class="line">(v_name member_table.member_name<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">x member_table.member_name<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> member_name <span class="keyword">into</span> x <span class="keyword">from</span> member_table <span class="keyword">where</span> member_name<span class="operator">=</span>v_name;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> member_table <span class="keyword">where</span> member_name<span class="operator">=</span>v_name;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;此会员已删除！&#x27;</span>);</span><br><span class="line">exception</span><br><span class="line"><span class="keyword">when</span> NO_DATA_FOUND <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;此会员不存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> del_member;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> del_member(<span class="string">&#x27;BB&#x27;</span>)</span><br><span class="line"><span class="keyword">exec</span> del_member(<span class="string">&#x27;喵喵喵&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h5 id="8-11-会员信息修改"><a href="#8-11-会员信息修改" class="headerlink" title="8.11 会员信息修改"></a>8.11 会员信息修改</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace</span><br><span class="line"><span class="keyword">procedure</span> upd_member(</span><br><span class="line">v_id member_table.member_id<span class="operator">%</span>type,</span><br><span class="line">v_name member_table.member_name<span class="operator">%</span>type,</span><br><span class="line">v_phone member_table.member_phone<span class="operator">%</span>type,</span><br><span class="line">v_point member_table.member_point<span class="operator">%</span>type,</span><br><span class="line">v_balance member_table.member_balance<span class="operator">%</span>type,</span><br><span class="line">v_date member_table.member_date<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">x member_table.member_id<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> member_id <span class="keyword">into</span> x <span class="keyword">from</span> member_table <span class="keyword">where</span> member_id<span class="operator">=</span>v_id;</span><br><span class="line">update member_table <span class="keyword">set</span> member_name<span class="operator">=</span>v_name,member_phone<span class="operator">=</span>v_phone,member_point<span class="operator">=</span>v_point,member_balance<span class="operator">=</span>v_balance,member_date<span class="operator">=</span>v_date</span><br><span class="line"><span class="keyword">where</span> member_id<span class="operator">=</span>v_id;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;会员已修改！&#x27;</span>);</span><br><span class="line">exception</span><br><span class="line"><span class="keyword">when</span> NO_DATA_FOUND <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;修改失败！该会员不存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> upd_member;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> upd_member(<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;李杭瑞&#x27;</span>,<span class="string">&#x27;13300225588&#x27;</span>,<span class="string">&#x27;196&#x27;</span>,<span class="string">&#x27;90&#x27;</span>,to_date(<span class="string">&#x27;2021-01-29 17:20:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h5 id="8-12-会员信息查询"><a href="#8-12-会员信息查询" class="headerlink" title="8.12 会员信息查询"></a>8.12 会员信息查询</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> que_member(</span><br><span class="line">v_id member_table.member_id<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">v1 member_table.member_id<span class="operator">%</span>type;</span><br><span class="line">v2 member_table.member_name<span class="operator">%</span>type;</span><br><span class="line">v3 member_table.member_phone<span class="operator">%</span>type;</span><br><span class="line">v4 member_table.member_point<span class="operator">%</span>type;</span><br><span class="line">v5 member_table.member_balance<span class="operator">%</span>type;</span><br><span class="line">v6 member_table.member_date<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> member_id,member_name,member_phone,member_point,member_balance,member_date</span><br><span class="line"><span class="keyword">into</span> v1,v2,v3,v4,v5,v6</span><br><span class="line"><span class="keyword">from</span> member_table <span class="keyword">where</span> member_id<span class="operator">=</span>v_id;</span><br><span class="line">dbms_output.put_line(v1<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v2<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v3<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v4<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v5<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v6);</span><br><span class="line">exception</span><br><span class="line"><span class="keyword">when</span> NO_DATA_FOUND <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;查询失败！此电影不存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> que_member;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> que_member(<span class="number">0002</span>)</span><br></pre></td></tr></table></figure>
<h5 id="8-13-折扣信息增加"><a href="#8-13-折扣信息增加" class="headerlink" title="8.13 折扣信息增加"></a>8.13 折扣信息增加</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace</span><br><span class="line"><span class="keyword">procedure</span> add_discount(</span><br><span class="line">v_id discount_table.discount_id<span class="operator">%</span>type,</span><br><span class="line">v_mid discount_table.movie_id<span class="operator">%</span>type,</span><br><span class="line">v_count discount_table.discount_count<span class="operator">%</span>type,</span><br><span class="line">v_point discount_table.discount_point<span class="operator">%</span>type,</span><br><span class="line">v_start discount_table.discount_start<span class="operator">%</span>type,</span><br><span class="line">v_end discount_table.discount_end<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> discount_table <span class="keyword">values</span>(v_id,v_mid,v_count,v_point,v_start,v_end);</span><br><span class="line">EXCEPTION</span><br><span class="line"><span class="keyword">when</span> Dup_val_on_index <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;此折扣信息已存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">when</span> others <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;exception&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> add_discount;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> add_discount(<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;30&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,to_date(<span class="string">&#x27;2021-3-13 15:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),to_date(<span class="string">&#x27;2021-5-10 12:10:10&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>))</span><br><span class="line"><span class="keyword">exec</span> add_discount(<span class="string">&#x27;0003&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;30&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,to_date(<span class="string">&#x27;2021-3-13 15:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),to_date(<span class="string">&#x27;2021-5-10 12:10:10&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h5 id="8-14-折扣信息删除"><a href="#8-14-折扣信息删除" class="headerlink" title="8.14 折扣信息删除"></a>8.14 折扣信息删除</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> del_discount</span><br><span class="line">(v_id discount_table.discount_id<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">x discount_table.discount_id<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> discount_id <span class="keyword">into</span> x <span class="keyword">from</span> discount_table <span class="keyword">where</span> discount_id<span class="operator">=</span>v_id;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> discount_table <span class="keyword">where</span> discount_id<span class="operator">=</span>v_id;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;此折扣信息已删除！&#x27;</span>);</span><br><span class="line">exception</span><br><span class="line"><span class="keyword">when</span> NO_DATA_FOUND <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;此折扣信息不存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> del_discount;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> del_discount(<span class="string">&#x27;0004&#x27;</span>)</span><br><span class="line"><span class="keyword">exec</span> del_discount(<span class="string">&#x27;0003&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h5 id="8-15-折扣信息修改"><a href="#8-15-折扣信息修改" class="headerlink" title="8.15 折扣信息修改"></a>8.15 折扣信息修改</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace</span><br><span class="line"><span class="keyword">procedure</span> upd_discount(</span><br><span class="line">v_id discount_table.discount_id<span class="operator">%</span>type,</span><br><span class="line">v_mid discount_table.movie_id<span class="operator">%</span>type,</span><br><span class="line">v_count discount_table.discount_count<span class="operator">%</span>type,</span><br><span class="line">v_point discount_table.discount_point<span class="operator">%</span>type,</span><br><span class="line">v_start discount_table.discount_start<span class="operator">%</span>type,</span><br><span class="line">v_end discount_table.discount_end<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">x discount_table.discount_id<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> discount_id <span class="keyword">into</span> x <span class="keyword">from</span> discount_table <span class="keyword">where</span> discount_id<span class="operator">=</span>v_id;</span><br><span class="line">update discount_table <span class="keyword">set</span> movie_id<span class="operator">=</span>v_mid,discount_count<span class="operator">=</span>v_count,discount_point<span class="operator">=</span>v_point,discount_start<span class="operator">=</span>v_start,discount_end<span class="operator">=</span>v_end</span><br><span class="line"><span class="keyword">where</span> discount_id<span class="operator">=</span>v_id;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;折扣信息已修改！&#x27;</span>);</span><br><span class="line">exception</span><br><span class="line"><span class="keyword">when</span> NO_DATA_FOUND <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;修改失败！此电影折扣信息不存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> upd_discount;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> upd_discount(<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;30&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,to_date(<span class="string">&#x27;2021-3-13 15:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),to_date(<span class="string">&#x27;2021-5-10 12:10:10&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h5 id="8-16-影讯信息查询"><a href="#8-16-影讯信息查询" class="headerlink" title="8.16 影讯信息查询"></a>8.16 影讯信息查询</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> que_discount(</span><br><span class="line">v_id discount_table.discount_id<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">v1 discount_table.discount_id<span class="operator">%</span>type;</span><br><span class="line">v2 discount_table.movie_id<span class="operator">%</span>type;</span><br><span class="line">v3 discount_table.discount_count<span class="operator">%</span>type;</span><br><span class="line">v4 discount_table.discount_point<span class="operator">%</span>type;</span><br><span class="line">v5 discount_table.discount_start<span class="operator">%</span>type;</span><br><span class="line">v6 discount_table.discount_end<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> discount_id,movie_id,discount_count,discount_point,discount_start,discount_end</span><br><span class="line"><span class="keyword">into</span> v1,v2,v3,v4,v5,v6</span><br><span class="line"><span class="keyword">from</span> discount_table <span class="keyword">where</span> discount_id<span class="operator">=</span>v_id;</span><br><span class="line">dbms_output.put_line(v1<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v2<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v3<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v4<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v5<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v6);</span><br><span class="line">exception</span><br><span class="line"><span class="keyword">when</span> NO_DATA_FOUND <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;查询失败！此电影不存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> que_discount;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> que_discount(<span class="number">0002</span>)</span><br></pre></td></tr></table></figure>
<h5 id="8-17-订单信息删除"><a href="#8-17-订单信息删除" class="headerlink" title="8.17 订单信息删除"></a>8.17 订单信息删除</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> del_sale</span><br><span class="line">(v_id sale_table.sale_id<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">x sale_table.sale_id<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> sale_id <span class="keyword">into</span> x <span class="keyword">from</span> sale_table <span class="keyword">where</span> sale_id<span class="operator">=</span>v_id;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> sale_table <span class="keyword">where</span> sale_id<span class="operator">=</span>v_id;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;此订单已删除！&#x27;</span>);</span><br><span class="line">exception</span><br><span class="line"><span class="keyword">when</span> NO_DATA_FOUND <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;此订单不存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> del_sale;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> del_sale(<span class="string">&#x27;0007&#x27;</span>)</span><br><span class="line"><span class="keyword">exec</span> del_sale(<span class="string">&#x27;0006&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h5 id="8-18-订单信息修改"><a href="#8-18-订单信息修改" class="headerlink" title="8.18 订单信息修改"></a>8.18 订单信息修改</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace</span><br><span class="line"><span class="keyword">procedure</span> upd_sale(</span><br><span class="line">v_id sale_table.sale_id<span class="operator">%</span>type,</span><br><span class="line">v_meid sale_table.member_id<span class="operator">%</span>type,</span><br><span class="line">v_moid sale_table.movie_id<span class="operator">%</span>type,</span><br><span class="line">v_date sale_table.sale_date<span class="operator">%</span>type,</span><br><span class="line">v_session sale_table.sale_session<span class="operator">%</span>type,</span><br><span class="line">v_room sale_table.sale_room<span class="operator">%</span>type,</span><br><span class="line">v_seat sale_table.sale_seat<span class="operator">%</span>type,</span><br><span class="line">v_price sale_table.sale_price<span class="operator">%</span>type,</span><br><span class="line">v_get sale_table.sale_get<span class="operator">%</span>type,</span><br><span class="line">v_flag sale_table.sale_flag<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">x sale_table.sale_id<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> sale_id <span class="keyword">into</span> x <span class="keyword">from</span> sale_table <span class="keyword">where</span> sale_id<span class="operator">=</span>v_id;</span><br><span class="line">update sale_table <span class="keyword">set</span> member_id<span class="operator">=</span>v_meid,movie_id<span class="operator">=</span>v_moid,sale_date<span class="operator">=</span>v_date,sale_session<span class="operator">=</span>v_session,</span><br><span class="line">sale_room<span class="operator">=</span>v_room,sale_seat<span class="operator">=</span>v_seat,sale_price<span class="operator">=</span>v_price,sale_get<span class="operator">=</span>v_get,sale_flag<span class="operator">=</span>v_flag</span><br><span class="line"><span class="keyword">where</span> sale_id<span class="operator">=</span>v_id;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;订单已修改！&#x27;</span>);</span><br><span class="line">exception</span><br><span class="line"><span class="keyword">when</span> NO_DATA_FOUND <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;修改失败！此订单不存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> upd_sale;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> upd_sale(<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,to_date(<span class="string">&#x27;2021-4-10 13:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),to_date(<span class="string">&#x27;2021-4-12 13:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;普通影厅1&#x27;</span>,<span class="string">&#x27;L坐&#x27;</span>,<span class="string">&#x27;60&#x27;</span>,<span class="string">&#x27;30&#x27;</span>,<span class="string">&#x27;Y&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h5 id="8-19-订单信息查询"><a href="#8-19-订单信息查询" class="headerlink" title="8.19 订单信息查询"></a>8.19 订单信息查询</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> que_sale(</span><br><span class="line">v_id sale_table.sale_id<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">v1 sale_table.sale_id<span class="operator">%</span>type;</span><br><span class="line">v2 sale_table.member_id<span class="operator">%</span>type;</span><br><span class="line">v3 sale_table.movie_id<span class="operator">%</span>type;</span><br><span class="line">v4 sale_table.sale_date<span class="operator">%</span>type;</span><br><span class="line">v5 sale_table.sale_session<span class="operator">%</span>type;</span><br><span class="line">v6 sale_table.sale_room<span class="operator">%</span>type;</span><br><span class="line">v7 sale_table.sale_seat<span class="operator">%</span>type;</span><br><span class="line">v8 sale_table.sale_price<span class="operator">%</span>type;</span><br><span class="line">v9 sale_table.sale_get<span class="operator">%</span>type;</span><br><span class="line">v10 sale_table.sale_flag<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> sale_id,member_id,movie_id,sale_date,sale_session,sale_room,sale_seat,sale_price,sale_get,</span><br><span class="line">sale_flag</span><br><span class="line"><span class="keyword">into</span> v1,v2,v3,v4,v5,v6,v7,v8,v9,v10</span><br><span class="line"><span class="keyword">from</span> sale_table <span class="keyword">where</span> sale_id<span class="operator">=</span>v_id;</span><br><span class="line">dbms_output.put_line(v1<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v2<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v3<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v4<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v5<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v6<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v7<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v8<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v9<span class="operator">||</span><span class="string">&#x27;,&#x27;</span></span><br><span class="line"><span class="operator">||</span>v10);</span><br><span class="line">exception</span><br><span class="line"><span class="keyword">when</span> NO_DATA_FOUND <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;查询失败！此订单不存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> que_sale;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> que_sale(<span class="number">0002</span>)</span><br></pre></td></tr></table></figure>
<h5 id="8-20-退单信息删除"><a href="#8-20-退单信息删除" class="headerlink" title="8.20 退单信息删除"></a>8.20 退单信息删除</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> del_back</span><br><span class="line">(v_id back_table.back_id<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">x back_table.back_id<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> back_id <span class="keyword">into</span> x <span class="keyword">from</span> back_table <span class="keyword">where</span> back_id<span class="operator">=</span>v_id;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> back_table <span class="keyword">where</span> back_id<span class="operator">=</span>v_id;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;此退单信息已删除！&#x27;</span>);</span><br><span class="line">exception</span><br><span class="line"><span class="keyword">when</span> NO_DATA_FOUND <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;此退单信息不存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> del_back;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> del_back(<span class="string">&#x27;0004&#x27;</span>)</span><br><span class="line"><span class="keyword">exec</span> del_back(<span class="string">&#x27;0003&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h5 id="8-21-退单信息修改"><a href="#8-21-退单信息修改" class="headerlink" title="8.21 退单信息修改"></a>8.21 退单信息修改</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace</span><br><span class="line"><span class="keyword">procedure</span> upd_back(</span><br><span class="line">v_id back_table.back_id<span class="operator">%</span>type,</span><br><span class="line">v_meid back_table.member_id<span class="operator">%</span>type,</span><br><span class="line">v_moid back_table.movie_id<span class="operator">%</span>type,</span><br><span class="line">v_sid back_table.sale_id<span class="operator">%</span>type,</span><br><span class="line">v_date back_table.back_date<span class="operator">%</span>type,</span><br><span class="line">v_count back_table.back_count<span class="operator">%</span>type,</span><br><span class="line">v_point back_table.back_point<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">x back_table.back_id<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> back_id <span class="keyword">into</span> x <span class="keyword">from</span> back_table <span class="keyword">where</span> back_id<span class="operator">=</span>v_id;</span><br><span class="line">update back_table <span class="keyword">set</span> member_id<span class="operator">=</span>v_meid,movie_id<span class="operator">=</span>v_moid,sale_id<span class="operator">=</span>v_sid,back_date<span class="operator">=</span>v_date,</span><br><span class="line">back_count<span class="operator">=</span>v_count,back_point<span class="operator">=</span>v_point</span><br><span class="line"><span class="keyword">where</span> back_id<span class="operator">=</span>v_id;</span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;退单信息已修改！&#x27;</span>);</span><br><span class="line">exception</span><br><span class="line"><span class="keyword">when</span> NO_DATA_FOUND <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;修改失败！此退单信息不存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> upd_back;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> upd_back(<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>,<span class="string">&#x27;0002&#x27;</span>,<span class="string">&#x27;0004&#x27;</span>,to_date(<span class="string">&#x27;2021-4-14 19:10:00&#x27;</span>,<span class="string">&#x27;YYYY-MM-DD HH24:MI:SS&#x27;</span>),<span class="string">&#x27;80&#x27;</span>,<span class="string">&#x27;8&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h5 id="8-22-退单信息查询"><a href="#8-22-退单信息查询" class="headerlink" title="8.22 退单信息查询"></a>8.22 退单信息查询</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> que_back(</span><br><span class="line">v_id back_table.back_id<span class="operator">%</span>type)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">v1 back_table.back_id<span class="operator">%</span>type;</span><br><span class="line">v2 back_table.member_id<span class="operator">%</span>type;</span><br><span class="line">v3 back_table.movie_id<span class="operator">%</span>type;</span><br><span class="line">v4 back_table.sale_id<span class="operator">%</span>type;</span><br><span class="line">v5 back_table.back_date<span class="operator">%</span>type;</span><br><span class="line">v6 back_table.back_count<span class="operator">%</span>type;</span><br><span class="line">v7 back_table.back_point<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">select</span> back_id,member_id,movie_id,sale_id,back_date,back_count,back_point</span><br><span class="line"><span class="keyword">into</span> v1,v2,v3,v4,v5,v6,v7</span><br><span class="line"><span class="keyword">from</span> back_table <span class="keyword">where</span> back_id<span class="operator">=</span>v_id;</span><br><span class="line">dbms_output.put_line(v1<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v2<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v3<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v4<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v5<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v6<span class="operator">||</span><span class="string">&#x27;,&#x27;</span><span class="operator">||</span>v7);</span><br><span class="line">exception</span><br><span class="line"><span class="keyword">when</span> NO_DATA_FOUND <span class="keyword">then</span></span><br><span class="line">dbms_output.put_line(<span class="string">&#x27;查询失败！此退单信息不存在！&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span> que_back;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exec</span> que_back(<span class="number">0002</span>)</span><br></pre></td></tr></table></figure>
<h4 id="9-导出"><a href="#9-导出" class="headerlink" title="9. 导出"></a>9. 导出</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exp system/123456@orcl file=D:\app\lhr.dmp owner=&lt;c<span class="comment">##lhr1802&gt;log=D:\app\lhr.log</span></span><br></pre></td></tr></table></figure>
<h2 id="设计总结"><a href="#设计总结" class="headerlink" title="设计总结"></a>设计总结</h2><p>在这次的实验中，我主要以积分优惠影票销售系统的设计为主，在上面的设计文档中，不仅涉及了表和字段，还涉及到了索引、视图、触发器、存储过程等内容。其中为了提高操作的效率，我主要利用存储过程来完成对表的操作，这使数据库的性能得到了优化。我利用了多种思路来设计这个系统，也利用各种的方法对表进行管理。</p>
<p>在实验过程中，系统功能主要是特惠电影票销售所需要的各种功能来实现的，在改系统的设计上让我们懂得了如何去寻找我们所要的设计的内容，增加了我个人的思维能力，进一步完善了我对oracle数据库的了解，也实现了对数据库的设计，最终成功完成我们自己想要的设计。</p>

    </article>
    <!-- license  -->
    
        <div class="license-wrapper">
            <p>原文作者：<a href="http://Vikot106.github.io">Vikot106</a>
            <p>原文链接：<a href="http://vikot106.github.io/%E9%A1%B9%E7%9B%AE/project-TicketSalesMS-Oracle/">http://vikot106.github.io/%E9%A1%B9%E7%9B%AE/project-TicketSalesMS-Oracle/</a>
            <p>发表日期：<a href="http://vikot106.github.io/%E9%A1%B9%E7%9B%AE/project-TicketSalesMS-Oracle/">April 27th 2021, 3:40:23 pm</a>
            <p>更新日期：<a href="http://vikot106.github.io/%E9%A1%B9%E7%9B%AE/project-TicketSalesMS-Oracle/">June 19th 2021, 5:06:50 pm</a>
            <p>版权声明：本文采用<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc/4.0/">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p>
        </div>
    
    <!-- paginator  -->
    <ul class="post-paginator">
        <li class="next">
            
                <div class="nextSlogan">Next Post</div>
                <a href= "/uncategorized/project-SteamRanking/" title= "项目：基于Python的游戏销售数据可视化与分析">
                    <div class="nextTitle">项目：基于Python的游戏销售数据可视化与分析</div>
                </a>
            
        </li>
        <li class="previous">
            
                <div class="prevSlogan">Previous Post</div>
                <a href= "/%E7%AC%94%E8%AE%B0/note-GitCommand/" title= "笔记：Git指令记录">
                    <div class="prevTitle">笔记：Git指令记录</div>
                </a>
            
        </li>
    </ul>
    <!-- 评论插件 -->
    <!-- 来必力City版安装代码 -->

<!-- City版安装代码已完成 -->
    
    
    <!-- gitalk评论 -->

    <!-- utteranc评论 -->

    <!-- partial('_partial/comment/changyan') -->
    <!--PC版-->


    
    

    <!-- 评论 -->

    <!-- idea from: https://hexo.fluid-dev.com/posts/hexo-injector/#%E6%96%87%E7%AB%A0%E6%97%B6%E6%95%88%E6%80%A7%E6%8F%90%E7%A4%BA -->
    
</main>

            <!-- profile -->
            
        </div>
        <footer class="footer footer-unloaded">
    <!-- social  -->
    
    <div class="social">
        
    
        
            
                <a href="mailto:Vikot106@hotmail.com" class="iconfont-archer email" title=email ></a>
            
        
    
        
            
                <a href="//github.com/Vikot106" class="iconfont-archer github" target="_blank" title=github></a>
            
        
    
        
            
                <span class="iconfont-archer wechat" title=wechat>
                  
                  <img class="profile-qr" src="/assets/wechat_qr.png" />
                </span>
            
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            
                <a href="//instagram.com/vikot106" class="iconfont-archer instagram" target="_blank" title=instagram></a>
            
        
    
        
    
        
    
        
    
        
    
        
    
        
            
                <a href="//linkedin.com/in/杭瑞-李-814382188" class="iconfont-archer linkedin" target="_blank" title=linkedin></a>
            
        
    
        
            
                <a href="//steamcommunity.com/id/minmoku" class="iconfont-archer steam" target="_blank" title=steam></a>
            
        
    
        
    
        
    

    </div>
    
    <!-- powered by Hexo  -->
    <div class="copyright">
        <span id="hexo-power">Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></span><span class="iconfont-archer power">&#xe635;</span><span id="theme-info">theme <a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a></span>
    </div>
    <!-- 不蒜子  -->
    
    <div class="busuanzi-container">
    
     
    <span id="busuanzi_container_site_pv">PV: <span id="busuanzi_value_site_pv"></span> :)</span>
    
    </div>
    
</footer>
    </div>
    <!-- toc -->
    
    <div class="toc-wrapper" style=
    







top:50vh;

    >
        <div class="toc-catalog">
            <span class="iconfont-archer catalog-icon">&#xe613;</span><span>CATALOG</span>
        </div>
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">1.</span> <span class="toc-text">需求分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E9%98%90%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">功能阐述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E4%BE%8B%E5%9B%BE"><span class="toc-number">1.2.</span> <span class="toc-text">用例图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1"><span class="toc-number">2.</span> <span class="toc-text">功能模块设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BD%B1%E8%AE%AF%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97"><span class="toc-number">2.1.</span> <span class="toc-text">影讯管理模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%9A%E5%91%98%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97"><span class="toc-number">2.2.</span> <span class="toc-text">会员管理模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%94%AE%E7%A5%A8%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97"><span class="toc-number">2.3.</span> <span class="toc-text">售票管理模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%80%E7%A5%A8%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97"><span class="toc-number">2.4.</span> <span class="toc-text">退票管理模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%98%E6%89%A3%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97"><span class="toc-number">2.5.</span> <span class="toc-text">折扣管理模块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-number">3.</span> <span class="toc-text">数据库设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E5%BF%B5%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1"><span class="toc-number">3.1.</span> <span class="toc-text">数据库概念结构设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1"><span class="toc-number">3.2.</span> <span class="toc-text">数据库逻辑结构设计</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#movie-table%EF%BC%88%E5%BD%B1%E8%AE%AF%E8%A1%A8%EF%BC%89"><span class="toc-number">3.2.1.</span> <span class="toc-text">movie_table（影讯表）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#member-table%EF%BC%88%E4%BC%9A%E5%91%98%E4%BF%A1%E6%81%AF%E8%A1%A8%EF%BC%89"><span class="toc-number">3.2.2.</span> <span class="toc-text">member_table（会员信息表）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sale-table%EF%BC%88%E5%94%AE%E7%A5%A8%E4%BF%A1%E6%81%AF%E8%A1%A8%EF%BC%89"><span class="toc-number">3.2.3.</span> <span class="toc-text">sale_table（售票信息表）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#back-table%EF%BC%88%E9%80%80%E7%A5%A8%E4%BF%A1%E6%81%AF%E8%A1%A8%EF%BC%89"><span class="toc-number">3.2.4.</span> <span class="toc-text">back_table（退票信息表）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#discount-table%EF%BC%88%E6%8A%98%E6%89%A3%E8%A1%A8%EF%BC%89"><span class="toc-number">3.2.5.</span> <span class="toc-text">discount_table（折扣表）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E4%BB%A5%E5%8F%8A%E6%8E%88%E6%9D%83%E5%8A%9F%E8%83%BD"><span class="toc-number">3.3.</span> <span class="toc-text">用户权限以及授权功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%A9%BA%E9%97%B4"><span class="toc-number">3.3.1.</span> <span class="toc-text">1. 创建表空间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E6%8E%88%E6%9D%83"><span class="toc-number">3.3.2.</span> <span class="toc-text">2. 普通用户的创建和授权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%A1%A8%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">3.3.3.</span> <span class="toc-text">3. 表的创建</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-%E5%88%9B%E5%BB%BA%E5%BD%B1%E8%AE%AF%E8%A1%A8%EF%BC%88movie-table%EF%BC%89"><span class="toc-number">3.3.3.1.</span> <span class="toc-text">3.1 创建影讯表（movie_table）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-%E5%88%9B%E5%BB%BA%E4%BC%9A%E5%91%98%E8%A1%A8%EF%BC%88member-table%EF%BC%89"><span class="toc-number">3.3.3.2.</span> <span class="toc-text">3.2 创建会员表（member_table）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-%E5%88%9B%E5%BB%BA%E5%94%AE%E7%A5%A8%E8%A1%A8%EF%BC%88sale-table%EF%BC%89"><span class="toc-number">3.3.3.3.</span> <span class="toc-text">3.3 创建售票表（sale_table）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-4-%E5%88%9B%E5%BB%BA%E9%80%80%E7%A5%A8%E8%A1%A8%EF%BC%88back-table%EF%BC%89"><span class="toc-number">3.3.3.4.</span> <span class="toc-text">3.4 创建退票表（back_table）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-5-%E5%88%9B%E5%BB%BA%E6%8A%98%E6%89%A3%E8%A1%A8%EF%BC%88discount-table%EF%BC%89"><span class="toc-number">3.3.3.5.</span> <span class="toc-text">3.5 创建折扣表（discount_table）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%A1%A8%E4%BF%A1%E6%81%AF%E7%9A%84%E5%BD%95%E5%85%A5"><span class="toc-number">3.3.4.</span> <span class="toc-text">4.表信息的录入</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-1-movie-table%E8%A1%A8"><span class="toc-number">3.3.4.1.</span> <span class="toc-text">4.1 movie_table表</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-2-member-table%E8%A1%A8"><span class="toc-number">3.3.4.2.</span> <span class="toc-text">4.2 member_table表</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-3-sale-table%E8%A1%A8"><span class="toc-number">3.3.4.3.</span> <span class="toc-text">4.3 sale_table表</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-4-back-table%E8%A1%A8"><span class="toc-number">3.3.4.4.</span> <span class="toc-text">4.4 back_table表</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-5-discount-table%E8%A1%A8"><span class="toc-number">3.3.4.5.</span> <span class="toc-text">4.5 discount_table表</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE"><span class="toc-number">3.3.5.</span> <span class="toc-text">5. 创建视图</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#5-1-%E6%9F%A5%E8%AF%A2%E7%94%B5%E5%BD%B1%E4%BD%99%E7%A5%A8"><span class="toc-number">3.3.5.1.</span> <span class="toc-text">5.1 查询电影余票</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-2-%E6%9F%A5%E8%AF%A2%E5%90%84%E4%B8%AA%E5%BD%B1%E7%89%87%E9%94%80%E9%87%8F"><span class="toc-number">3.3.5.2.</span> <span class="toc-text">5.2 查询各个影片销量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-%E6%9F%A5%E8%AF%A2%E5%90%84%E4%B8%AA%E5%BD%B1%E7%89%87%E6%8A%98%E6%89%A3%E5%8A%9B%E5%BA%A6"><span class="toc-number">3.3.5.3.</span> <span class="toc-text">5.3 查询各个影片折扣力度</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-4-%E6%9F%A5%E8%AF%A2%E5%90%84%E4%B8%AA%E5%BD%B1%E7%89%87%E6%94%B6%E5%85%A5"><span class="toc-number">3.3.5.4.</span> <span class="toc-text">5.4 查询各个影片收入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-5-%E6%9F%A5%E8%AF%A2%E5%90%84%E4%B8%AA%E5%BD%B1%E7%89%87%E9%80%80%E6%AC%BE%E6%83%85%E5%86%B5"><span class="toc-number">3.3.5.5.</span> <span class="toc-text">5.5 查询各个影片退款情况</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-6-%E7%BB%9F%E8%AE%A1%E4%BC%9A%E5%91%98%E7%A7%AF%E5%88%86%E4%B8%8E%E5%8F%AF%E6%8A%B5%E6%89%A3%E7%9A%84%E9%87%91%E9%A2%9D"><span class="toc-number">3.3.5.6.</span> <span class="toc-text">5.6 统计会员积分与可抵扣的金额</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-7-%E6%9F%A5%E8%AF%A2%E4%BC%9A%E5%91%98%E8%A7%82%E5%BD%B1%E6%8E%92%E8%A1%8C"><span class="toc-number">3.3.5.7.</span> <span class="toc-text">5.7 查询会员观影排行</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-8-%E6%9F%A5%E8%AF%A2%E5%94%AE%E7%A5%A8%E8%A1%A8%E4%B8%AD%E5%B7%B2%E5%8F%96%E8%B5%B0%E7%9A%84%E7%A5%A8"><span class="toc-number">3.3.5.8.</span> <span class="toc-text">5.8 查询售票表中已取走的票</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-9-%E6%9F%A5%E8%AF%A2%E5%94%AE%E7%A5%A8%E8%A1%A8%E4%B8%AD%E6%9C%AA%E5%8F%96%E8%B5%B0%E7%9A%84%E7%A5%A8"><span class="toc-number">3.3.5.9.</span> <span class="toc-text">5.9 查询售票表中未取走的票</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="toc-number">3.3.6.</span> <span class="toc-text">6. 创建索引</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1-%E6%8C%89%E7%85%A7%E7%94%B5%E5%BD%B1%E4%BF%A1%E6%81%AF%E5%88%9B%E5%BB%BA%E4%BD%99%E7%A5%A8%E9%99%8D%E5%BA%8F%E7%B4%A2%E5%BC%95"><span class="toc-number">3.3.6.1.</span> <span class="toc-text">6.1 按照电影信息创建余票降序索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-%E6%8C%89%E7%85%A7%E6%8A%98%E6%89%A3%E4%BB%B7%E6%A0%BC%E5%88%9B%E5%BB%BA%E5%8D%87%E5%BA%8F%E7%B4%A2%E5%BC%95"><span class="toc-number">3.3.6.2.</span> <span class="toc-text">6.2 按照折扣价格创建升序索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-3-%E6%8C%89%E7%85%A7%E8%B4%AD%E7%A5%A8%E7%A7%AF%E5%88%86%E5%88%9B%E5%BB%BA%E5%8D%87%E5%BA%8F%E7%B4%A2%E5%BC%95"><span class="toc-number">3.3.6.3.</span> <span class="toc-text">6.3 按照购票积分创建升序索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-4-%E6%8C%89%E7%85%A7%E4%BC%9A%E5%91%98%E7%A7%AF%E5%88%86%E5%88%9B%E5%BB%BA%E9%99%8D%E5%BA%8F%E7%B4%A2%E5%BC%95"><span class="toc-number">3.3.6.4.</span> <span class="toc-text">6.4 按照会员积分创建降序索引</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E5%88%9B%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">3.3.7.</span> <span class="toc-text">7. 创建触发器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-1-%E6%8F%92%E5%85%A5%E4%BF%AE%E6%94%B9%E6%88%96%E5%88%A0%E9%99%A4%E5%BD%B1%E8%AE%AF%E5%90%8E%E7%BB%9F%E8%AE%A1%E5%BD%93%E5%89%8D%E7%94%B5%E5%BD%B1%E6%95%B0%E9%87%8F"><span class="toc-number">3.3.7.1.</span> <span class="toc-text">7.1 插入修改或删除影讯后统计当前电影数量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-2-%E4%BF%AE%E6%94%B9%E4%BC%9A%E5%91%98%E8%A1%A8%E5%90%8E%E6%98%BE%E7%A4%BA%E4%BF%AE%E6%94%B9%E5%89%8D%E4%B8%8E%E4%BF%AE%E6%94%B9%E5%90%8E%E4%BF%A1%E6%81%AF%E7%9A%84%E5%B7%AE%E5%88%AB%EF%BC%8C%E6%8F%92%E5%85%A5%E5%92%8C%E5%88%A0%E9%99%A4%E4%BC%9A%E5%91%98%E6%97%B6%E6%98%BE%E7%A4%BA%E5%88%A0%E9%99%A4%E7%9A%84%E4%BC%9A%E5%91%98%E5%8D%A1%E5%8F%B7%E5%92%8C%E4%BC%9A%E5%91%98%E5%90%8D"><span class="toc-number">3.3.7.2.</span> <span class="toc-text">7.2 修改会员表后显示修改前与修改后信息的差别，插入和删除会员时显示删除的会员卡号和会员名</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-3-%E4%BF%AE%E6%94%B9%E5%94%AE%E7%A5%A8%E8%A1%A8%E5%90%8E%E6%98%BE%E7%A4%BA%E4%BF%AE%E6%94%B9%E5%89%8D%E4%B8%8E%E4%BF%AE%E6%94%B9%E5%90%8E%E4%BF%A1%E6%81%AF%E7%9A%84%E5%B7%AE%E5%88%AB"><span class="toc-number">3.3.7.3.</span> <span class="toc-text">7.3 修改售票表后显示修改前与修改后信息的差别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-4-%E4%BF%AE%E6%94%B9%E9%80%80%E7%A5%A8%E8%A1%A8%E5%90%8E%E6%98%BE%E7%A4%BA%E4%BF%AE%E6%94%B9%E5%89%8D%E4%B8%8E%E4%BF%AE%E6%94%B9%E5%90%8E%E4%BF%A1%E6%81%AF%E7%9A%84%E5%B7%AE%E5%88%AB"><span class="toc-number">3.3.7.4.</span> <span class="toc-text">7.4 修改退票表后显示修改前与修改后信息的差别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-5-%E8%B4%AD%E7%A5%A8%E5%90%8E%E6%98%BE%E7%A4%BA%E6%8A%98%E6%89%A3%E3%80%81%E8%8E%B7%E5%BE%97%E7%A7%AF%E5%88%86%E3%80%81%E5%8F%AF%E6%8A%B5%E9%87%91%E9%A2%9D%E3%80%81%E4%BD%99%E9%A2%9D%E3%80%81%E4%BD%99%E7%A5%A8"><span class="toc-number">3.3.7.5.</span> <span class="toc-text">7.5 购票后显示折扣、获得积分、可抵金额、余额、余票</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-6-%E9%80%80%E7%A5%A8%E5%90%8E%E6%98%BE%E7%A4%BA%E4%BD%99%E9%A2%9D%E3%80%81%E9%80%80%E6%AC%BE%E9%A2%9D%E5%92%8C%E9%80%80%E8%BF%98%E7%A7%AF%E5%88%86"><span class="toc-number">3.3.7.6.</span> <span class="toc-text">7.6 退票后显示余额、退款额和退还积分</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-7-%E5%A2%9E%E6%94%B9%E6%8A%98%E6%89%A3%E5%90%8E%E6%98%BE%E7%A4%BA%E6%8A%98%E6%89%A3%E4%BB%B7%E6%A0%BC"><span class="toc-number">3.3.7.7.</span> <span class="toc-text">7.7 增改折扣后显示折扣价格</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">3.3.8.</span> <span class="toc-text">8. 创建存储过程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#8-1-%E4%BC%9A%E5%91%98%E5%85%85%E5%80%BC"><span class="toc-number">3.3.8.1.</span> <span class="toc-text">8.1 会员充值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-2-%E4%BC%9A%E5%91%98%E8%B4%AD%E7%A5%A8"><span class="toc-number">3.3.8.2.</span> <span class="toc-text">8.2 会员购票</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-3-%E4%BC%9A%E5%91%98%E9%80%80%E7%A5%A8"><span class="toc-number">3.3.8.3.</span> <span class="toc-text">8.3 会员退票</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-4-%E4%BC%9A%E5%91%98%E5%8F%96%E7%A5%A8"><span class="toc-number">3.3.8.4.</span> <span class="toc-text">8.4 会员取票</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-5-%E5%BD%B1%E8%AE%AF%E4%BF%A1%E6%81%AF%E5%A2%9E%E5%8A%A0"><span class="toc-number">3.3.8.5.</span> <span class="toc-text">8.5 影讯信息增加</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-6-%E5%BD%B1%E8%AE%AF%E4%BF%A1%E6%81%AF%E5%88%A0%E9%99%A4"><span class="toc-number">3.3.8.6.</span> <span class="toc-text">8.6 影讯信息删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-7-%E5%BD%B1%E8%AE%AF%E4%BF%A1%E6%81%AF%E4%BF%AE%E6%94%B9"><span class="toc-number">3.3.8.7.</span> <span class="toc-text">8.7 影讯信息修改</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-8-%E5%BD%B1%E8%AE%AF%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.3.8.8.</span> <span class="toc-text">8.8 影讯信息查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-9-%E4%BC%9A%E5%91%98%E4%BF%A1%E6%81%AF%E5%A2%9E%E5%8A%A0"><span class="toc-number">3.3.8.9.</span> <span class="toc-text">8.9 会员信息增加</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-10-%E4%BC%9A%E5%91%98%E4%BF%A1%E6%81%AF%E5%88%A0%E9%99%A4"><span class="toc-number">3.3.8.10.</span> <span class="toc-text">8.10 会员信息删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-11-%E4%BC%9A%E5%91%98%E4%BF%A1%E6%81%AF%E4%BF%AE%E6%94%B9"><span class="toc-number">3.3.8.11.</span> <span class="toc-text">8.11 会员信息修改</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-12-%E4%BC%9A%E5%91%98%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.3.8.12.</span> <span class="toc-text">8.12 会员信息查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-13-%E6%8A%98%E6%89%A3%E4%BF%A1%E6%81%AF%E5%A2%9E%E5%8A%A0"><span class="toc-number">3.3.8.13.</span> <span class="toc-text">8.13 折扣信息增加</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-14-%E6%8A%98%E6%89%A3%E4%BF%A1%E6%81%AF%E5%88%A0%E9%99%A4"><span class="toc-number">3.3.8.14.</span> <span class="toc-text">8.14 折扣信息删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-15-%E6%8A%98%E6%89%A3%E4%BF%A1%E6%81%AF%E4%BF%AE%E6%94%B9"><span class="toc-number">3.3.8.15.</span> <span class="toc-text">8.15 折扣信息修改</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-16-%E5%BD%B1%E8%AE%AF%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.3.8.16.</span> <span class="toc-text">8.16 影讯信息查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-17-%E8%AE%A2%E5%8D%95%E4%BF%A1%E6%81%AF%E5%88%A0%E9%99%A4"><span class="toc-number">3.3.8.17.</span> <span class="toc-text">8.17 订单信息删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-18-%E8%AE%A2%E5%8D%95%E4%BF%A1%E6%81%AF%E4%BF%AE%E6%94%B9"><span class="toc-number">3.3.8.18.</span> <span class="toc-text">8.18 订单信息修改</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-19-%E8%AE%A2%E5%8D%95%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.3.8.19.</span> <span class="toc-text">8.19 订单信息查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-20-%E9%80%80%E5%8D%95%E4%BF%A1%E6%81%AF%E5%88%A0%E9%99%A4"><span class="toc-number">3.3.8.20.</span> <span class="toc-text">8.20 退单信息删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-21-%E9%80%80%E5%8D%95%E4%BF%A1%E6%81%AF%E4%BF%AE%E6%94%B9"><span class="toc-number">3.3.8.21.</span> <span class="toc-text">8.21 退单信息修改</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-22-%E9%80%80%E5%8D%95%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.3.8.22.</span> <span class="toc-text">8.22 退单信息查询</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E5%AF%BC%E5%87%BA"><span class="toc-number">3.3.9.</span> <span class="toc-text">9. 导出</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%80%BB%E7%BB%93"><span class="toc-number">4.</span> <span class="toc-text">设计总结</span></a></li></ol>
    </div>
    
    <div class="back-top iconfont-archer">&#xe639;</div>
    <div class="sidebar sidebar-hide">
    <ul class="sidebar-tabs sidebar-tabs-active-0">
        <li class="sidebar-tab-archives"><span class="iconfont-archer">&#xe67d;</span><span class="tab-name">Archive</span></li>
        <li class="sidebar-tab-tags"><span class="iconfont-archer">&#xe61b;</span><span class="tab-name">Tag</span></li>
        <li class="sidebar-tab-categories"><span class="iconfont-archer">&#xe666;</span><span class="tab-name">Cate</span></li>
    </ul>
    <div class="sidebar-content sidebar-content-show-archive">
          <div class="sidebar-panel-archives">
    <!-- 在ejs中将archive按照时间排序 -->
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <div class="total-and-search">
        <div class="total-archive">
        Total : 19
        </div>
        <!-- search  -->
        
    </div>
    
    <div class="post-archive">
    
    
    
    
    <div class="archive-year"> 2021 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">06/18</span><a class="archive-post-title" href= "/%E7%AC%94%E8%AE%B0/note-springMVC/" >笔记：SpringMVC</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">05/06</span><a class="archive-post-title" href= "/uncategorized/project-SteamRanking/" >项目：基于Python的游戏销售数据可视化与分析</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">04/27</span><a class="archive-post-title" href= "/%E9%A1%B9%E7%9B%AE/project-TicketSalesMS-Oracle/" >项目：特惠影票销售系统PL/SQL数据库设计</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">03/30</span><a class="archive-post-title" href= "/%E7%AC%94%E8%AE%B0/note-GitCommand/" >笔记：Git指令记录</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">03/20</span><a class="archive-post-title" href= "/%E9%A1%B9%E7%9B%AE/project-TouchlessOrder-Client/" >项目：无接触点餐终端</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">01/20</span><a class="archive-post-title" href= "/%E7%AC%94%E8%AE%B0/note-SpigotPluginDev/" >笔记：Minecraft开发之Spigot插件</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> 2020 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/25</span><a class="archive-post-title" href= "/%E9%A1%B9%E7%9B%AE/project-AutomaticExaminationSystem/" >项目：自动考试系统</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/08</span><a class="archive-post-title" href= "/%E9%A1%B9%E7%9B%AE/project-CollegeClubMS-CS/" >项目：社团管理系统——CSharp版</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/23</span><a class="archive-post-title" href= "/%E9%A1%B9%E7%9B%AE/project-CollegeClubMS-JAVA/" >项目：社团管理系统——JAVA版</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/16</span><a class="archive-post-title" href= "/%E7%AC%94%E8%AE%B0/note-RaspberryLAMP/" >笔记：树莓派部署LAMP</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">06/09</span><a class="archive-post-title" href= "/%E7%AC%94%E8%AE%B0/note-LinuxCommand/" >笔记：Linux命令记录</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">01/29</span><a class="archive-post-title" href= "/%E5%B7%A5%E5%85%B7/tool-Converter/" >程序：乱码转换工具</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">01/20</span><a class="archive-post-title" href= "/%E7%AC%94%E8%AE%B0/note-sql/" >笔记：SQL语句的学习</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">01/07</span><a class="archive-post-title" href= "/%E5%B7%A5%E5%85%B7/tool-CustomUpdate/" >程序：补丁更新工具</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> 2019 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">05/23</span><a class="archive-post-title" href= "/%E5%B7%A5%E5%85%B7/tool-SoftwareReg/" >程序：产品注册与验证工具</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">04/16</span><a class="archive-post-title" href= "/%E7%AC%94%E8%AE%B0/note-nsis/" >笔记：NSIS软件安装向导脚本打包记录</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">04/03</span><a class="archive-post-title" href= "/%E5%B7%A5%E5%85%B7/tool-RandomGroup/" >程序：随机分组工具</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> 2018 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/08</span><a class="archive-post-title" href= "/%E7%AC%94%E8%AE%B0/note-CodeStyle/" >笔记：代码风格统一记录</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/12</span><a class="archive-post-title" href= "/%E7%AC%94%E8%AE%B0/note-hexo/" >笔记：hexo中创建文章、标签与分类</a>
        </li>
    
    </div>
  </div>
        <div class="sidebar-panel-tags">
    <div class="sidebar-tags-name">
    
        <span class="sidebar-tag-name" data-tags="代码风格"><span class="iconfont-archer">&#xe606;</span>代码风格</span>
    
        <span class="sidebar-tag-name" data-tags="更新完结"><span class="iconfont-archer">&#xe606;</span>更新完结</span>
    
        <span class="sidebar-tag-name" data-tags="Git"><span class="iconfont-archer">&#xe606;</span>Git</span>
    
        <span class="sidebar-tag-name" data-tags="更新中"><span class="iconfont-archer">&#xe606;</span>更新中</span>
    
        <span class="sidebar-tag-name" data-tags="Linux"><span class="iconfont-archer">&#xe606;</span>Linux</span>
    
        <span class="sidebar-tag-name" data-tags="Script"><span class="iconfont-archer">&#xe606;</span>Script</span>
    
        <span class="sidebar-tag-name" data-tags="树莓派"><span class="iconfont-archer">&#xe606;</span>树莓派</span>
    
        <span class="sidebar-tag-name" data-tags="LAMP"><span class="iconfont-archer">&#xe606;</span>LAMP</span>
    
        <span class="sidebar-tag-name" data-tags="hexo"><span class="iconfont-archer">&#xe606;</span>hexo</span>
    
        <span class="sidebar-tag-name" data-tags="Minecraft"><span class="iconfont-archer">&#xe606;</span>Minecraft</span>
    
        <span class="sidebar-tag-name" data-tags="Spigot"><span class="iconfont-archer">&#xe606;</span>Spigot</span>
    
        <span class="sidebar-tag-name" data-tags="JAVA"><span class="iconfont-archer">&#xe606;</span>JAVA</span>
    
        <span class="sidebar-tag-name" data-tags="SSM"><span class="iconfont-archer">&#xe606;</span>SSM</span>
    
        <span class="sidebar-tag-name" data-tags="NSIS"><span class="iconfont-archer">&#xe606;</span>NSIS</span>
    
        <span class="sidebar-tag-name" data-tags="SQL"><span class="iconfont-archer">&#xe606;</span>SQL</span>
    
        <span class="sidebar-tag-name" data-tags="C#"><span class="iconfont-archer">&#xe606;</span>C#</span>
    
        <span class="sidebar-tag-name" data-tags="窗体程序"><span class="iconfont-archer">&#xe606;</span>窗体程序</span>
    
        <span class="sidebar-tag-name" data-tags=".net"><span class="iconfont-archer">&#xe606;</span>.net</span>
    
        <span class="sidebar-tag-name" data-tags="代码记录"><span class="iconfont-archer">&#xe606;</span>代码记录</span>
    
        <span class="sidebar-tag-name" data-tags="Struts2"><span class="iconfont-archer">&#xe606;</span>Struts2</span>
    
        <span class="sidebar-tag-name" data-tags="JavaWeb"><span class="iconfont-archer">&#xe606;</span>JavaWeb</span>
    
        <span class="sidebar-tag-name" data-tags="Web程序"><span class="iconfont-archer">&#xe606;</span>Web程序</span>
    
        <span class="sidebar-tag-name" data-tags="HTML"><span class="iconfont-archer">&#xe606;</span>HTML</span>
    
        <span class="sidebar-tag-name" data-tags="Java小程序"><span class="iconfont-archer">&#xe606;</span>Java小程序</span>
    
        <span class="sidebar-tag-name" data-tags="Python"><span class="iconfont-archer">&#xe606;</span>Python</span>
    
        <span class="sidebar-tag-name" data-tags="数据分析"><span class="iconfont-archer">&#xe606;</span>数据分析</span>
    
        <span class="sidebar-tag-name" data-tags="Oracle数据库"><span class="iconfont-archer">&#xe606;</span>Oracle数据库</span>
    
        <span class="sidebar-tag-name" data-tags="PL/SQL"><span class="iconfont-archer">&#xe606;</span>PL/SQL</span>
    
        <span class="sidebar-tag-name" data-tags="Batch"><span class="iconfont-archer">&#xe606;</span>Batch</span>
    
        <span class="sidebar-tag-name" data-tags="Java"><span class="iconfont-archer">&#xe606;</span>Java</span>
    
    </div>
    <div class="iconfont-archer sidebar-tags-empty">&#xe678;</div>
    <div class="tag-load-fail" style="display: none; color: #ccc; font-size: 0.6rem;">
    缺失模块。<br/>
    1、请确保node版本大于6.2<br/>
    2、在博客根目录（注意不是archer根目录）执行以下命令：<br/>
    <span style="color: #f75357; font-size: 1rem; line-height: 2rem;">npm i hexo-generator-json-content --save</span><br/>
    3、在根目录_config.yml里添加配置：
    <pre style="color: #787878; font-size: 0.6rem;">
jsonContent:
  meta: false
  pages: false
  posts:
    title: true
    date: true
    path: true
    text: false
    raw: false
    content: false
    slug: false
    updated: false
    comments: false
    link: false
    permalink: false
    excerpt: false
    categories: true
    tags: true</pre>
    </div> 
    <div class="sidebar-tags-list"></div>
</div>
        <div class="sidebar-panel-categories">
    <div class="sidebar-categories-name">
    
        <span class="sidebar-category-name" data-categories="笔记"><span class="iconfont-archer">&#xe60a;</span>笔记</span>
    
        <span class="sidebar-category-name" data-categories="项目"><span class="iconfont-archer">&#xe60a;</span>项目</span>
    
        <span class="sidebar-category-name" data-categories="工具"><span class="iconfont-archer">&#xe60a;</span>工具</span>
    
    </div>
    <div class="iconfont-archer sidebar-categories-empty">&#xe678;</div>
    <div class="sidebar-categories-list"></div>
</div>
    </div>
</div> 
    <script>
    var siteMeta = {
        root: "/",
        author: "Vikot106"
    }
</script>
    <!-- CDN failover -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <script type="text/javascript">
        if (typeof window.$ === 'undefined')
        {
            console.warn('jquery load from jsdelivr failed, will load local script')
            document.write('<script src="/lib/jquery.min.js">\x3C/script>')
        }
    </script>
    <script src="/scripts/main.js"></script>
    <!-- algolia -->
    
    <!-- busuanzi  -->
    
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    <!-- CNZZ  -->
    
    </div>
    <!-- async load share.js -->
    
        <script src="/scripts/share.js" async></script>    
     
    </body>
</html>


